webpackJsonp([1],{"+JPb":function(e,t){},0:function(e,t){},"5v0L":function(e,t){},"6Tya":function(e,t){},"7ALG":function(e,t){},"7ytx":function(e,t){},"8W4K":function(e,t){},HQP3:function(e,t){},Hkij:function(e,t){},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("7+uW"),r=s("NYxO"),i=s("zL8q"),n=s.n(i),o=(s("tvR6"),s("1nuA")),l=s("DmT9"),c=s("L6bb");function u(e){return e.toString().length>1?""+e:"0"+e}function d(e){if(!e)return"";var t=new Date(+e),s=t.getHours(),a=t.getMinutes(),r=t.getSeconds();return u(s)+":"+u(a)+":"+u(r)}function m(e){if(!e)return"";var t=new Date(+e),s=t.getFullYear(),a=t.getMonth()+1,r=t.getDate();return s+"/"+u(a)+"/"+u(r)}function p(e){return o.parse(e)}function v(e,t){return l(e,{query:t})}function f(e){return c(e)}function h(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"+";if(Array.isArray(e))return s=t||s,e.reduce(function(e,t){return h(e,t,s)});t=""+t;var a=(e=""+e).split(".")[1]&&e.split(".")[1].length||0,r=t.split(".")[1]&&t.split(".")[1].length||0,i=Math.max(a,r),n=a-r;if(e=e.replace(".",""),t=t.replace(".",""),n>=0){var o=Math.pow(10,n);t=Number(t)*o}else{var l=Math.pow(10,-n);e=Number(e)*l}switch(s){case"+":return(e=+e+ +t)/Math.pow(10,i);case"-":return(e=+e-+t)/Math.pow(10,i);case"*":return(e=+e*+t)/Math.pow(10,a+r);default:throw new Error("unexpected operator")}}var g={name:"App",data:function(){return{activeIndex:"index"}},computed:{user:function(){return this.$store.state.user}},created:function(){var e=this;location.href.split("#")[1]&&"/"===location.href.split("#")[1]&&this.$router.replace("/index");var t=this.$store.state.token||localStorage.getItem("token")&&localStorage.getItem("token").slice(0,-5);t?this.$store.state.user.id?this.user=this.$store.state.user:this.$request.post("/test/getUserInfor").set("Authorization","Bearer "+t).set("accept","json").end(function(s,a){if(s)401===s.status?e.$router.push("login"):e.$message({type:"error",message:s.response.text});else{a.body.token&&(localStorage.setItem("token",a.body.token+Math.random().toFixed(3)),t=a.body.token);var r=v("http://localhost:3000/",{token:a.body.id});r.on("message",function(t){var s=JSON.parse(t);e.$notify.info({title:"通知",dangerouslyUseHTMLString:!0,message:s.data,duration:6e3})}),e.$store.commit("setSocket",r),e.$store.commit("setToken",t),e.$store.commit("setUser",a.body)}}):this.$router.push("/login")}},_={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("el-container",[s("el-header",[s("el-menu",{staticClass:"el-menu",attrs:{"default-active":e.activeIndex,mode:"horizontal",router:!0,"background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"}},[s("el-menu-item",{staticClass:"main-page",attrs:{index:"/index"}},[e._v("首页")]),e._v(" "),s("el-menu-item",{attrs:{index:"/reimbursement/index/createreq"}},[e._v("差旅报销")]),e._v(" "),s("el-menu-item",{attrs:{index:"/project"}},[e._v("项目管理")]),e._v(" "),s("el-menu-item",{attrs:{index:"/statistics"}},[e._v("数据统计")]),e._v(" "),s("el-menu-item",{staticClass:"user-info",attrs:{index:"/userInfor"}},[s("el-badge",[s("img",{staticClass:"logo",attrs:{src:e.$store.state.user&&e.$store.state.user.avatar||"http://localhost:3000/static/avatar/timg.jpeg"}})]),e._v(" "),s("span",[e._v(e._s(e.$store.state.user&&e.$store.state.user.name))]),e._v(" "),e.$store.state.user&&e.$store.state.user.name?e._e():s("span",[e._v("请登入")])],1)],1)],1),e._v(" "),s("el-main",{staticClass:"index-content"},[s("router-view")],1)],1)],1)},staticRenderFns:[]};var b=s("VU/8")(g,_,!1,function(e){s("7ALG")},null,null).exports,k=s("GG98"),y=s.n(k),w=s("/ocq"),$={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"process"},[s("div",{staticClass:"operater"},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-shenqingdan"}})]),e._v(" "),s("div",[e._v("新建申请单")])]),e._v(" "),s("div",{staticClass:"split"},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-weibiaoti40"}})])]),e._v(" "),s("div",{staticClass:"operater"},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-chuchashenqing"}})]),e._v(" "),s("div",[e._v("新建出差申请")])]),e._v(" "),s("div",{staticClass:"split"},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-weibiaoti40"}})])]),e._v(" "),s("div",{staticClass:"operater"},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-shenhezhong"}})]),e._v(" "),s("div",[e._v("审核中")])]),e._v(" "),s("div",{staticClass:"split"},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-weibiaoti40"}})])]),e._v(" "),s("div",{staticClass:"operater"},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-iconddsh"}})]),e._v(" "),s("div",[e._v("审核通过")])]),e._v(" "),s("div",{staticClass:"split"},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-weibiaoti40"}})])]),e._v(" "),s("div",{staticClass:"operater"},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-feiji800"}})]),e._v(" "),s("div",[e._v("出差")])]),e._v(" "),s("div",{staticClass:"split"},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-weibiaoti40"}})])]),e._v(" "),s("div",{staticClass:"operater"},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-feiyongbaoxiaodan"}})]),e._v(" "),s("div",[e._v("新建报销申请")])]),e._v(" "),s("div",{staticClass:"split"},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-weibiaoti40"}})])]),e._v(" "),s("div",{staticClass:"operater"},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-shenhezhong"}})]),e._v(" "),s("div",[e._v("审核中")])]),e._v(" "),s("div",{staticClass:"split"},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-weibiaoti40"}})])]),e._v(" "),s("div",{staticClass:"operater"},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-iconddsh"}})]),e._v(" "),s("div",[e._v("审核通过")])]),e._v(" "),s("div",{staticClass:"split"},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-weibiaoti40"}})])]),e._v(" "),s("div",{staticClass:"operater"},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-fapiaoguanli"}})]),e._v(" "),s("div",[e._v("上交发票")])])])},staticRenderFns:[]};var q={name:"Index",components:{Process:s("VU/8")({data:function(){return{}}},$,!1,function(e){s("wFCr")},"data-v-58bd674f",null).exports},data:function(){return{policys:[],announcements:[],questions:[]}},created:function(){this.$store.state.token||localStorage.getItem("token")&&localStorage.getItem("token").slice(0,-5)||this.$router.replace("/login"),this.getPolicy(),this.getAnnouncement(),this.getQuestion()},methods:{formatDate:m,goRouter:function(e){this.$router.push(e)},getPolicy:function(){var e=this,t=this.$store.state.token||localStorage.getItem("token")&&localStorage.getItem("token").slice(0,-5);this.$request.post("/test/getPolicy").set("Authorization","Bearer "+t).send({limit:5,offset:0}).end(function(t,s){t?e.$message({type:"error",message:t.response.text}):e.policys=s.body.data})},getQuestion:function(){var e=this,t=this.$store.state.token||localStorage.getItem("token")&&localStorage.getItem("token").slice(0,-5);this.$request.post("/test/getQuestion").set("Authorization","Bearer "+t).send({limit:5,offset:0}).end(function(t,s){t?e.$message({type:"error",message:t.response.text}):e.questions=s.body.data})},getAnnouncement:function(){var e=this,t=this.$store.state.token||localStorage.getItem("token")&&localStorage.getItem("token").slice(0,-5);this.$request.post("/test/getAnnouncement").set("Authorization","Bearer "+t).send({limit:6,offset:0}).end(function(t,s){t?e.$message({type:"error",message:t.response.text}):e.announcements=s.body.data})}}},x={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"index"},[s("el-container",[s("el-aside",{attrs:{width:"4rem"}},[s("el-card",{staticClass:"aside-card feedback"},[s("div",{attrs:{slot:"header"},slot:"header"},[s("span",[e._v("问题反馈")])]),e._v(" "),s("div",{staticClass:"aside-content"},[s("span",[e._v("如有问题，请联系17862702878")])])]),e._v(" "),s("el-card",{staticClass:"aside-card"},[s("div",{staticClass:"aside-header",staticStyle:{padding:"0"},attrs:{slot:"header"},slot:"header"},[s("span",[e._v("报销政策&公告")]),e._v(" "),s("el-button",{staticClass:"more",attrs:{type:"text"},on:{click:function(t){e.goRouter("policy")}}},[e._v("更多>")])],1),e._v(" "),e.policys.length?e._e():s("span",[e._v("暂无数据哦~")]),e._v(" "),e._l(e.policys,function(t){return s("div",{key:t.id,staticClass:"aside-content",on:{click:function(s){e.goRouter("/policy/detail?id="+t.id)}}},[s("span",[e._v(e._s(t.title))])])})],2),e._v(" "),s("el-card",{staticClass:"aside-card"},[s("div",{staticClass:"aside-header",attrs:{slot:"header"},slot:"header"},[s("span",[e._v("常见问题")]),e._v(" "),s("el-button",{staticClass:"more",attrs:{type:"text"},on:{click:function(t){e.goRouter("question")}}},[e._v("更多>")])],1),e._v(" "),e.questions.length?e._e():s("span",[e._v("暂无数据哦~")]),e._v(" "),e._l(e.questions,function(t){return s("div",{key:t.id,staticClass:"aside-content",on:{click:function(s){e.goRouter("/question/detail?id="+t.id)}}},[s("span",[e._v(e._s(t.title))])])})],2)],1),e._v(" "),s("el-main",[s("div",{staticClass:"content-wrapper"},[s("div",{staticClass:"main-card process"},[s("div",{staticClass:"header"},[s("span",[e._v("报销流程")])]),e._v(" "),s("div",{staticClass:"content"},[s("process")],1)]),e._v(" "),s("div",{staticClass:"main-card bulletin"},[s("div",{staticClass:"header"},[s("span",[e._v("通知")]),e._v(" "),s("el-button",{staticClass:"more",attrs:{type:"text"},on:{click:function(t){e.goRouter("announcement")}}},[e._v("更多>")])],1),e._v(" "),s("div",{staticClass:"content"},[e.announcements.length?e._e():s("div",{staticClass:"no-bulletin"},[e._v("暂无通知~")]),e._v(" "),e._l(e.announcements,function(t){return s("div",{key:t.id,staticClass:"entry",on:{click:function(s){e.goRouter(t.url)}}},[s("span",{staticClass:"title"},[e._v(e._s(t.title))]),e._v(" "),s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"bottom"}},[s("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(t.data)},slot:"content"}),e._v(" "),s("span",{staticClass:"cont",domProps:{innerHTML:e._s(t.data)}})]),e._v(" "),s("span",{staticClass:"time"},[e._v(e._s(e.formatDate(t.occurTime)))])],1)})],2)])])])],1),e._v(" "),s("div",{staticClass:"footer"},[s("span",[e._v("哈尔滨工业大学(威海)")]),s("span",{staticStyle:{"margin-left":".2rem"}},[e._v(e._s(e.$store.state.user.laboratory))])])],1)},staticRenderFns:[]};var C=s("VU/8")(q,x,!1,function(e){s("POQ2")},"data-v-16eb8dc0",null).exports,R={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"reimbursement"},[s("el-container",[s("el-aside",[s("el-menu",{attrs:{collapse:!1,router:!0,"default-active":"create"}},[s("el-submenu",{attrs:{index:"1"}},[s("template",{slot:"title"},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-xinjian"}})]),e._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[e._v("新建申请")])]),e._v(" "),s("el-menu-item",{attrs:{index:"createreq"}},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-xinjian"}})]),e._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[e._v("新建出差申请")])]),e._v(" "),s("el-menu-item",{attrs:{index:"createreim"}},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-xinjian"}})]),e._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[e._v("新建报销申请")])])],2),e._v(" "),s("el-submenu",{attrs:{index:"2"}},[s("template",{slot:"title"},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-daiban"}})]),e._v(" "),s("span",[e._v("我的待办")])]),e._v(" "),s("el-menu-item",{attrs:{index:"requndone"}},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-order1"}})]),e._v(" "),s("span",[e._v("未完成申请")])]),e._v(" "),s("el-menu-item",{attrs:{index:"reimundone"}},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-feiyongbaoxiaodan"}})]),e._v(" "),s("span",[e._v("未完成报销")])]),e._v(" "),1===e.$store.state.user.level?s("el-menu-item",{attrs:{index:"requnremark"}},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-dengdaishenpi"}})]),e._v(" "),s("span",[e._v("待审批申请")])]):e._e(),e._v(" "),2===e.$store.state.user.level?s("el-menu-item",{attrs:{index:"reimunremark"}},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-dengdaishenpi"}})]),e._v(" "),s("span",[e._v("待审批报销")])]):e._e()],2),e._v(" "),s("el-menu-item",{attrs:{index:"find"}},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-chaxun"}})]),e._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[e._v("查询申请")])])],1)],1),e._v(" "),s("el-main",[s("router-view")],1)],1)],1)},staticRenderFns:[]};var I=s("VU/8")({data:function(){return{}}},R,!1,function(e){s("kiXi")},"data-v-66ac7578",null).exports,S=s("Dd8w"),D=s.n(S),T=[{label:"火车",value:30},{label:"轮船",value:31},{label:"飞机",value:32},{label:"汽车",value:33},{label:"其它（市内交通）",value:34}],j=[{label:"交通费",options:T},{label:"住宿费",options:[{label:"住宿费",value:10}]},{label:"其它费用",options:[{label:"行李费",value:20},{label:"民航车费",value:21},{label:"航空保险",value:22},{label:"邮电费",value:23},{label:"文具资料费",value:24},{label:"其它非交通费用",value:25}]}],A={30:"火车",31:"轮船",32:"飞机",33:"汽车",34:"其它（市内交通）",10:"住宿费",20:"行李费",21:"民航车费",22:"航空保险",23:"邮电费",24:"文具资料费",25:"其它非交通费用"},P=[{state:1,title:"任务待审批",desc:"任务审批完成后，您可以正常出差"},{state:2,title:"任务审批通过",desc:""},{state:3,title:"报销待审批",desc:"您的报销申请已提交，请耐心等待"},{state:4,title:"报销审批通过",desc:"您的报销申请已通过，请在规定时间内打印粘贴联并上交发票"},{state:5,title:"已完成",desc:"财务人员已经收票"}],B={1:"任务待审批",2:"任务审批通过",3:"报销待审批",4:"报销审批通过",5:"已完成"},F={30:[{label:"火车软席",value:0},{label:"高铁动车商务座",value:1},{label:"全列软席列车一等软座",value:2},{label:"高铁列车一等座",value:3},{label:"火车硬席",value:4},{label:"高铁动车二等座",value:5},{label:"全列软席列车二等软座",value:6},{label:"夕发朝至直达特快全列软卧",value:7}],31:[{label:"一等舱",value:0},{label:"二等舱",value:1},{label:"三等舱",value:2}],32:[{label:"头等舱",value:0},{label:"商务舱",value:1},{label:"经济舱",value:2}]},E={props:{requestion:{type:Object,required:!0},isRemark:{type:Boolean,default:!1},inline:{type:Boolean,default:!1},showButton:{type:Boolean,default:!0},projects:{type:Array,default:function(){return[]}}},data:function(){return{ways:T,feeTypes:j,steps:P,feeTypesEnum:A,seat:F,newReim:{type:30,startAddress:"",startDate:"",startTime:"",endAddress:"",endDate:"",endTime:"",seat:"",desc:"",money:""},remarkResult:0,remarkReason:"",dialog1Visible:!1,dialog2Visible:!1}},methods:{formatTime:d,formatDate:m,exportTrip:function(){var e=window.open("_blank"),t=document.getElementById("printTripInfo").outerHTML;e.document.write("\n            <style>\n            table {\n                font-size: 14px;\n                border:solid #000000;\n                border-width:1px 0px 0px 1px;\n            }\n            td{\n                border:solid #000000;\n                border-width:0px 1px 1px 0px;\n            }\n            th {\n                border:solid #000000;\n                border-width:0px 1px 1px 0px;\n            }\n            .label {\n                width: 70px;\n                text-align: center;\n            }\n            .value {\n                text-indent: 2px;\n                text-align: left;\n                font-weight: 400;\n            }\n            .desc {\n                height: 100px;\n            }\n            </style>"),e.document.write(t),e.document.close(),e.print(),e.close()},remarkClose:function(){this.dialog2Visible=!1},submit:function(e){this.$emit("operateRequestion",void 0,e)},remark:function(){this.$emit("remarkRequestion",this.remarkResult,this.remarkReason),this.dialog2Visible=!1}}},z={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"create"},[0!=e.requestion.state?s("el-steps",{staticClass:"state-wrapper",attrs:{active:e.requestion.state,"align-center":""}},e._l(e.steps,function(e){return s("el-step",{key:e.title,attrs:{title:e.title,description:e.desc}})})):e._e(),e._v(" "),s("el-form",{staticClass:"requestion-wrapper",attrs:{"label-width":"0.8rem",inline:e.inline},model:{value:e.requestion,callback:function(t){e.requestion=t},expression:"requestion"}},[s("el-form-item",{attrs:{label:"申请人:"}},[e._v("\n            "+e._s(e.requestion.name)+"\n        ")]),e._v(" "),s("el-form-item",{attrs:{label:"研究室:"}},[e._v("\n            "+e._s(e.$store.state.user.laboratory)+"\n        ")]),e._v(" "),s("el-form-item",{attrs:{label:"所属项目:"}},[0===e.requestion.state?s("el-select",{attrs:{clearable:""},model:{value:e.requestion.project,callback:function(t){e.$set(e.requestion,"project",t)},expression:"requestion.project"}},e._l(e.projects,function(e){return s("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})})):s("span",[e._v(e._s(e.requestion.title))])],1),e._v(" "),0!=e.requestion.state?s("el-form-item",{attrs:{label:"申请时间:"}},[e._v("\n            "+e._s(e.formatDate(e.requestion.occurTime))+"\n        ")]):e._e()],1),e._v(" "),s("p",{staticClass:"split"},[e._v("出差任务申请\n        "),e.requestion.state>=2?s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"},on:{click:e.exportTrip}},[s("use",{attrs:{"xlink:href":"#icon-print"}})]):e._e()]),e._v(" "),s("el-form",{staticClass:"trip-wrapper",attrs:{"label-width":"0.8rem",inline:e.inline},model:{value:e.requestion,callback:function(t){e.requestion=t},expression:"requestion"}},[s("el-form-item",{attrs:{label:"出差时间:"}},[0===e.requestion.state?s("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.requestion.dataRange,callback:function(t){e.$set(e.requestion,"dataRange",t)},expression:"requestion.dataRange"}}):s("span",[e._v(e._s(e.formatDate(e.requestion.startTime))+" 至 "+e._s(e.formatDate(e.requestion.endTime)))])],1),e._v(" "),s("el-form-item",{attrs:{label:"交通工具:"}},[0===e.requestion.state?s("el-select",{model:{value:e.requestion.way,callback:function(t){e.$set(e.requestion,"way",t)},expression:"requestion.way"}},e._l(e.ways,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})):s("span",[e._v(e._s(e.feeTypesEnum[e.requestion.way]))])],1),e._v(" "),s("el-form-item",{attrs:{label:"目的地:"}},[0===e.requestion.state?s("el-input",{attrs:{placeholder:"输入目的地"},model:{value:e.requestion.destination,callback:function(t){e.$set(e.requestion,"destination",t)},expression:"requestion.destination"}}):s("span",[e._v(e._s(e.requestion.destination))])],1),e._v(" "),s("el-form-item",{attrs:{label:"出差事由:"}},[0===e.requestion.state?s("el-input",{attrs:{placeholder:"输入出差事由"},model:{value:e.requestion.description,callback:function(t){e.$set(e.requestion,"description",t)},expression:"requestion.description"}}):s("span",[e._v(e._s(e.requestion.description))])],1),e._v(" "),e.requestion.state>=2?s("el-form-item",{attrs:{label:"审批人:"}},e._l(e.requestion.approver,function(t,a){return s("span",{key:a},[e._v(e._s(t))])})):e._e()],1),e._v(" "),s("el-dialog",{attrs:{visible:e.dialog2Visible,width:"30%","before-close":e.remarkClose},on:{"update:visible":function(t){e.dialog2Visible=t}}},[[s("el-radio",{attrs:{label:0},model:{value:e.remarkResult,callback:function(t){e.remarkResult=t},expression:"remarkResult"}},[e._v("通过")]),e._v(" "),s("el-radio",{attrs:{label:1},model:{value:e.remarkResult,callback:function(t){e.remarkResult=t},expression:"remarkResult"}},[e._v("驳回")])],e._v(" "),e.remarkResult?s("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入驳回原因"},model:{value:e.remarkReason,callback:function(t){e.remarkReason=t},expression:"remarkReason"}}):e._e(),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialog2Visible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.remark}},[e._v("确 定")])],1)],2),e._v(" "),e.showButton?s("div",[e.requestion.state>0&&e.requestion.state<=2&&!e.isRemark?s("el-button",{staticClass:"submit",attrs:{type:"primary"},on:{click:function(t){e.submit(0)}}},[e._v("撤销")]):e._e(),e._v(" "),e.requestion.state<1&&!e.isRemark?s("el-button",{staticClass:"submit",attrs:{type:"primary"},on:{click:function(t){e.submit(1)}}},[e._v("提交申请")]):e._e(),e._v(" "),e.requestion.state>=1&&e.requestion.state<2&&e.isRemark?s("el-button",{staticClass:"submit",attrs:{type:"primary"},on:{click:function(t){e.dialog2Visible=!0}}},[e._v("审批")]):e._e()],1):e._e(),e._v(" "),s("div",{staticStyle:{width:"100%","font-size":"14px","text-align":"center"},attrs:{id:"printTripInfo"}},[s("span",{staticStyle:{"font-weight":"bold"}},[e._v("网络与信息安全技术研究中心出差任务审批单")]),e._v(" "),s("table",{staticStyle:{width:"80%",margin:"15px auto 0"},attrs:{cellspacing:"0"}},[s("tr",[s("td",{staticClass:"label"},[e._v("申请人")]),e._v(" "),s("td",{staticClass:"value"},[e._v(e._s(e.requestion.name))]),e._v(" "),s("td",{staticClass:"label"},[e._v("出差时间")]),e._v(" "),s("td",{staticClass:"value"},[e._v(e._s(e.formatDate(e.requestion.startTime))+"-"+e._s(e.formatDate(e.requestion.endTime)))])]),e._v(" "),s("tr",[s("td",{staticClass:"label"},[e._v("计入项目")]),e._v(" "),s("td",{staticClass:"value"},[e._v(e._s(e.requestion.title))]),e._v(" "),s("td",{staticClass:"label"},[e._v("交通工具")]),e._v(" "),s("td",{staticClass:"value"},[e._v(e._s(e.feeTypesEnum[e.requestion.way]))])]),e._v(" "),s("tr",[s("td",{staticClass:"label"},[e._v("目的地")]),e._v(" "),s("th",{staticClass:"value",attrs:{colspan:"3"}},[e._v(e._s(e.requestion.destination))])]),e._v(" "),s("tr",{staticClass:"desc"},[s("td",{staticClass:"label"},[e._v("出差事由")]),e._v(" "),s("th",{staticClass:"value",attrs:{colspan:"3"}},[e._v(e._s(e.requestion.destination))])]),e._v(" "),e._m(0),e._v(" "),e._m(1)])])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("tr",[t("td",{staticClass:"label"},[this._v("课题组长审批意见")]),this._v(" "),t("th",{staticClass:"value",attrs:{colspan:"3"}},[this._v("同意")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("tr",[t("td",{staticClass:"label"},[this._v("中心领导审批意见")]),this._v(" "),t("th",{staticClass:"value",attrs:{colspan:"3"}},[this._v("同意")])])}]};var U=s("VU/8")(E,z,!1,function(e){s("UmmX")},"data-v-39e721cd",null).exports,V={components:{Requestion:U},data:function(){return{requestion:{user:"",name:"",laboratory:"",state:0,dataRange:[],way:30,destination:"",description:"",approver:[]},projects:[]}},created:function(){this.getProjects()},mounted:function(){this.setRequestion()},methods:{getProjects:function(){var e=this,t=this.$store.state.token||localStorage.getItem("token")&&localStorage.getItem("token").slice(0,-5);this.$request.post("/test/getProjects").set("Authorization","Bearer "+t).end(function(t,s){t?e.$message({type:"error",message:t.response.text}):e.projects=s.body})},setRequestion:function(){var e=this;if(this.$store.state.user.name)this.requestion={user:this.$store.state.user&&this.$store.state.user.id,name:this.$store.state.user&&this.$store.state.user.name,laboratory:this.$store.state.user&&this.$store.state.user.laboratory,state:0};else{var t=this.$store.state.token||localStorage.token&&localStorage.token.slice(0,-5);t?this.$request.post("/test/getUserInfor").set("Authorization","Bearer "+t).set("accept","json").end(function(t,s){t?401===t.status?e.$router.replace("/login"):e.$message({type:"error",message:t.response.text}):(e.requestion={user:e.$store.state.user&&e.$store.state.user.id,name:e.$store.state.user&&e.$store.state.user.name,laboratory:e.$store.state.user&&e.$store.state.user.laboratory,state:0},e.$store.commit("setUser",s.body))}):this.$router.replace("/login")}},createRequestion:function(e){var t=this,s=this.$store.state.token||localStorage.token&&localStorage.token.slice(0,-5);this.requestion.name?this.requestion.dataRange?this.requestion.way?this.requestion.destination?this.$request.post("/test/createRequestion").set("Authorization","Bearer "+s).send(D()({},this.requestion,{startTime:new Date(this.requestion.dataRange[0]).getTime(),endTime:new Date(this.requestion.dataRange[1]).getTime(),dataRange:null})).set("accept","json").end(function(e,s){e?401===e.status?t.$router.push("/login"):t.$message({type:"error",message:e.response.text}):s.status>=200&&s.status<300&&(t.$message({type:"success",message:"新建申请单成功"}),t.$router.push("/reimbursement/index/reqdetail?id="+s.body.id))}):this.$message({message:"请输入出差的目的地",type:"error"}):this.$message({message:"请选择交通工具",type:"error"}):this.$message({message:"请选择出差时间",type:"error"}):this.$message({message:"发生错误，请刷新页面",type:"error"})}}},M={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"create-req"},[t("requestion",{attrs:{requestion:this.requestion,projects:this.projects},on:{operateRequestion:this.createRequestion}})],1)},staticRenderFns:[]};var N=s("VU/8")(V,M,!1,function(e){s("diG0")},"data-v-ed5c21f8",null).exports,L={props:{requestion:{type:Object,required:!0},reims:{type:Array,default:function(){return[]}},pics:{type:Array,default:function(){return[]}},isRemark:{type:Boolean,default:!1},inline:{type:Boolean,default:!1},showButton:{type:Boolean,default:!0},isCreatable:{type:Boolean,default:!1}},data:function(){return{ways:T,feeTypes:j,steps:P,feeTypesEnum:A,seat:F,newReim:{type:30,startAddress:"",startDate:"",startTime:"",endAddress:"",endDate:"",endTime:"",seat:"",desc:"",money:"",note:""},remarkResult:0,remarkReason:"",dialog1Visible:!1,dialogImageUrl:"",dialogPicture:!1}},computed:{acountMoney:function(){return 0===this.reims.length?"0.00":1===this.reims.length?this.reims[0].money.toFixed(2):this.reims.reduce(function(e,t){return h(e=e.money||e,t.money)}).toFixed(2)},isSelf:function(){return this.$store.state.user.id===this.requestion.requester},uploadHeaders:function(){return{Authorization:"Bearer "+(this.$store.state.token||localStorage.getItem("token")&&localStorage.getItem("token").slice(0,-5))}}},methods:{formatTime:d,formatDate:m,setSeat:function(e,t){return t?F[e][t].label:""},exportReim:function(){var e=this.$store.state.token||localStorage.getItem("token")&&localStorage.getItem("token").slice(0,-5);this.$request.post("/test/exportReim").set("Authorization","Bearer "+e).send({id:this.requestion.id}).end(function(e,t){e?console.log(e):window.open(t.text)})},exportCopy:function(){window.open("http://localhost:3000/static/copy.pdf")},exportFinanceReim:function(){var e=this.$store.state.token||localStorage.getItem("token")&&localStorage.getItem("token").slice(0,-5);this.$request.post("/test/exportFinanceReim").set("Authorization","Bearer "+e).send({id:this.requestion.id}).end(function(e,t){e?console.log(e):window.open(t.text)})},addNewReim:function(){this.$emit("addNewReim",this.newReim),this.dialog1Visible=!1},handleRemove:function(e,t){var s=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=void 0;r=void 0===a?{id:e.response.id,url:e.response.url}:{id:e.id,url:e.url};var i=this.$store.state.token||localStorage.getItem("token")&&localStorage.getItem("token").slice(0,-5);this.$request.post("/test/deleteInvoice").set("Authorization","Bearer "+i).send(r).end(function(e,t){e?s.$message({type:"error",message:e.response.text}):(void 0!==a&&s.$emit("removeInvoice",a),s.$message({type:"success",message:"删除成功"}))})},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogPicture=!0},showDialog1Visible:function(){this.newReim={type:30,startAddress:"",startDate:"",startTime:"",endAddress:"",endDate:"",endTime:"",seat:"",desc:"",money:"",note:""},this.dialog1Visible=!0},changeFeeType:function(e){this.newReim.seat=""},deleteReim:function(e,t){this.$emit("deleteReim",e,t)}}},H={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"reimwrapper"},[e.requestion.state>2||e.requestion.state>1&&e.isCreatable?s("div",[s("p",{staticClass:"split"},[e._v("单据报销申请\n            "),e.requestion.state>=4?s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"},on:{click:e.exportReim}},[s("use",{attrs:{"xlink:href":"#icon-print"}})]):e._e(),e._v(" "),e.requestion.state>=4?s("span",{staticClass:"exportFinanceReim",on:{click:e.exportCopy}},[e._v("下载发票粘贴联")]):e._e(),e._v(" "),e.requestion.state>=4?s("span",{staticClass:"exportFinanceReim",on:{click:e.exportFinanceReim}},[e._v("下载财务审批报销单")]):e._e(),e._v(" "),e.requestion.state>=2&&e.requestion.state<4&&!e.isRemark&&e.isSelf?s("span",{staticClass:"addReim",on:{click:e.showDialog1Visible}},[e._v("添加条目")]):e._e()]),e._v(" "),s("el-table",{staticClass:"reimbursement-wrapper",staticStyle:{width:"100%"},attrs:{data:e.reims}},[s("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),s("el-table-column",{attrs:{label:"费用类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(e.feeTypesEnum[t.row.type])+"\n                ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"开始日期",width:"95"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(e.formatDate(t.row.startDate))+"\n                ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"开始时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(e.formatTime(t.row.startTime))+"\n                ")]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"startAddress",label:"起点"}}),e._v(" "),s("el-table-column",{attrs:{label:"结束日期",width:"95"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(e.formatDate(t.row.endDate))+"\n                ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"结束时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(e.formatTime(t.row.endTime))+"\n                ")]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"endAddress",label:"止点"}}),e._v(" "),s("el-table-column",{attrs:{label:"席别"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(e.setSeat(t.row.type,t.row.seat))+"\n                ")]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"desc",label:"费用描述"}}),e._v(" "),s("el-table-column",{attrs:{label:"金额"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s((+t.row.money).toFixed(2))+"\n                ")]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"note",label:"备注"}}),e._v(" "),e.requestion.state>=4?s("el-table-column",{attrs:{prop:"title",label:"报销来源（项目）"}}):e._e(),e._v(" "),e.requestion.state>=2&&e.requestion.state<4&&!e.isRemark?s("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{staticStyle:{color:"rgb(255, 208, 75)"},attrs:{type:"text"},on:{click:function(s){e.deleteReim(t.row,t.$index)}}},[e._v("删除")])]}}])}):e._e()],1),e._v(" "),s("p",{staticClass:"acount-money"},[e._v("共"+e._s(e.acountMoney)+"元")]),e._v(" "),s("div",{staticClass:"invoice-wrapper"},[s("p",{staticClass:"split"},[e._v("上传发票")]),e._v(" "),e._l(e.pics,function(t,a){return s("li",{key:t.id,staticClass:"picture-content"},[s("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:t.url,alt:""}}),e._v(" "),s("span",{staticClass:"picture-operate"},[s("span",{staticClass:"icon picture-preview",on:{click:function(s){e.handlePictureCardPreview(t)}}},[s("i",{staticClass:"el-icon-zoom-in"})]),e._v(" "),e.requestion.state>=2&&e.requestion.state<=3&&!e.isRemark&&e.isSelf?s("span",{staticClass:"icon picture-delete",on:{click:function(s){e.handleRemove(t,void 0,a)}}},[s("i",{staticClass:"el-icon-delete"})]):e._e()])])}),e._v(" "),s("el-upload",{directives:[{name:"show",rawName:"v-show",value:e.requestion.state>=2&&e.requestion.state<=3&&!e.isRemark&&e.isSelf,expression:"requestion.state>=2&&requestion.state<=3&&!isRemark&&isSelf"}],attrs:{action:"/test/uploadInvoice?requestion="+e.requestion.id,"list-type":"picture-card",headers:e.uploadHeaders,accept:"image/*","on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove}},[s("i",{staticClass:"el-icon-plus"})])],2)],1):e._e(),e._v(" "),s("el-dialog",{attrs:{title:"新增报销事项",visible:e.dialog1Visible,width:"50%"},on:{"update:visible":function(t){e.dialog1Visible=t}}},[s("el-form",{attrs:{"label-width":"0.8rem"},model:{value:e.newReim,callback:function(t){e.newReim=t},expression:"newReim"}},[s("el-form-item",{attrs:{label:"费用类型"}},[s("el-select",{on:{change:e.changeFeeType},model:{value:e.newReim.type,callback:function(t){e.$set(e.newReim,"type",t)},expression:"newReim.type"}},e._l(e.feeTypes,function(t){return s("el-option-group",{key:t.label,attrs:{label:t.label}},e._l(t.options,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))}))],1),e._v(" "),e.newReim.type>=30&&e.newReim.type<=39?s("el-form-item",{attrs:{label:"起点"}},[s("el-input",{attrs:{placeholder:"输入起点"},model:{value:e.newReim.startAddress,callback:function(t){e.$set(e.newReim,"startAddress",t)},expression:"newReim.startAddress"}})],1):e._e(),e._v(" "),s("el-form-item",{attrs:{label:"开始日期"}},[s("el-date-picker",{attrs:{placeholder:"输入开始日期"},model:{value:e.newReim.startDate,callback:function(t){e.$set(e.newReim,"startDate",t)},expression:"newReim.startDate"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"开始时间"}},[s("el-time-picker",{attrs:{placeholder:"输入开始时间"},model:{value:e.newReim.startTime,callback:function(t){e.$set(e.newReim,"startTime",t)},expression:"newReim.startTime"}})],1),e._v(" "),e.newReim.type>=30&&e.newReim.type<=39?s("el-form-item",{attrs:{label:"终点"}},[s("el-input",{attrs:{placeholder:"输入终点"},model:{value:e.newReim.endAddress,callback:function(t){e.$set(e.newReim,"endAddress",t)},expression:"newReim.endAddress"}})],1):e._e(),e._v(" "),s("el-form-item",{attrs:{label:"结束日期"}},[s("el-date-picker",{attrs:{placeholder:"输入结束日期"},model:{value:e.newReim.endDate,callback:function(t){e.$set(e.newReim,"endDate",t)},expression:"newReim.endDate"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"结束时间"}},[s("el-time-picker",{attrs:{placeholder:"输入结束时间"},model:{value:e.newReim.endTime,callback:function(t){e.$set(e.newReim,"endTime",t)},expression:"newReim.endTime"}})],1),e._v(" "),e.newReim.type>=30&&e.newReim.type<=32?s("el-form-item",{attrs:{label:"席别"}},[s("el-select",{model:{value:e.newReim.seat,callback:function(t){e.$set(e.newReim,"seat",t)},expression:"newReim.seat"}},e._l(e.seat[e.newReim.type],function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1):e._e(),e._v(" "),s("el-form-item",{attrs:{label:"描述"}},[s("el-input",{attrs:{placeholder:"输入费用描述"},model:{value:e.newReim.desc,callback:function(t){e.$set(e.newReim,"desc",t)},expression:"newReim.desc"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"金额"}},[s("el-input",{attrs:{placeholder:"输入费用金额"},model:{value:e.newReim.money,callback:function(t){e.$set(e.newReim,"money",t)},expression:"newReim.money"}},[s("span",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("￥")])])],1),e._v(" "),s("el-form-item",{attrs:{label:"备注"}},[s("el-input",{attrs:{placeholder:"输入备注信息"},model:{value:e.newReim.note,callback:function(t){e.$set(e.newReim,"note",t)},expression:"newReim.note"}})],1)],1),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialog1Visible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.addNewReim}},[e._v("确 定")])],1)],1),e._v(" "),s("el-dialog",{attrs:{visible:e.dialogPicture},on:{"update:visible":function(t){e.dialogPicture=t}}},[s("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)},staticRenderFns:[]};var O=s("VU/8")(L,H,!1,function(e){s("Hkij")},null,null).exports,Q={components:{ReimWrapper:O},data:function(){return{select:"",opts:[],requestion:{},reims:[]}},created:function(){this.getCreatableReim()},methods:{formatDate:m,getCreatableReim:function(){var e=this,t=this.$store.state.token||localStorage.getItem("token")&&localStorage.getItem("token").slice(0,-5);this.$request.post("/test/getCreatableReim").set("Authorization","Bearer "+t).end(function(t,s){t?console.log(t):e.opts=s.body})},selectReq:function(e){this.requestion=this.opts[e]},addNewReim:function(e){var t=this;if(this.$store.state.user.id===this.requestion.requester)if(e){var s=this.$store.state.token||localStorage.getItem("token")&&localStorage.getItem("token").slice(0,-5);e.startDate=new Date(e.startDate).getTime()||"",e.startTime=new Date(e.startTime).getTime()||"",e.endDate=new Date(e.startDate).getTime()||"",e.endTime=new Date(e.endTime).getTime()||"",this.$request.post("/test/addReimbursement").set("Authorization","Bearer "+s).send(D()({requestion:this.requestion.id,uid:this.$store.state.user.id,project:this.requestion.project},e)).end(function(s,a){s?t.$message({type:"error",message:s.response.text}):(t.$message({type:"success",message:"添加成功"}),t.reims.push(e),t.$router.replace("/reimbursement/index/reimdetail?id="+t.requestion.id))})}else this.$message({type:"error",message:"请添加报销项"});else this.$message({type:"error",message:"系统错误"})}}},W={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"create-reim"},[s("span",{staticClass:"label"},[e._v("选择申请：")]),e._v(" "),s("el-select",{attrs:{placeholder:"选择申请表"},on:{change:e.selectReq},model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},e._l(e.opts,function(e,t){return s("el-option",{key:e.id,attrs:{label:e.description,value:t}})})),e._v(" "),e.requestion?s("el-form",{staticClass:"requestion-wrapper",attrs:{"label-width":"0.8rem",inline:!0},model:{value:e.requestion,callback:function(t){e.requestion=t},expression:"requestion"}},[s("el-form-item",{attrs:{label:"申请人:"}},[e._v("\n            "+e._s(e.requestion.name)+"\n        ")]),e._v(" "),s("el-form-item",{attrs:{label:"实验室:"}},[e._v("\n            "+e._s(e.$store.state.user.laboratory)+"\n        ")]),e._v(" "),s("el-form-item",{attrs:{label:"所属项目:"}},[s("span",[e._v(e._s(e.requestion.title))])]),e._v(" "),s("el-form-item",{attrs:{label:"申请时间:"}},[s("span",[e._v(e._s(e.formatDate(e.requestion.occurTime)))])])],1):e._e(),e._v(" "),s("reim-wrapper",{attrs:{requestion:e.requestion,reims:e.reims,isCreatable:!0},on:{addNewReim:e.addNewReim}})],1)},staticRenderFns:[]};var J=s("VU/8")(Q,W,!1,function(e){s("n4s9")},null,null).exports,Y={data:function(){return{stateEnum:B,requestions:[]}},created:function(){this.getUndoneRequestion()},methods:{formatDate:m,getUndoneRequestion:function(){var e=this,t=this.$store.state.token||localStorage.getItem("token")&&localStorage.getItem("token").slice(0,-5);this.$request.post("/test/getUndoneRequestion").set("Authorization","Bearer "+t).end(function(t,s){t?(e.requestions=[],console.log(t)):e.requestions=s.body})},goForDetail:function(e){this.$router.push("/reimbursement/index/reqdetail?id="+e)},deleteRequestion:function(e,t){var s=this;this.$confirm("请求撤销后无法恢复，您确定要撤销吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a=s.$store.state.token||localStorage.getItem("token")&&localStorage.getItem("token").slice(0,-5);s.$request.post("/test/deleteRequestion").set("Authorization","Bearer "+a).send({id:e}).end(function(e,a){e?console.log(e):(s.requestions.splice(t,1),s.$message({type:"success",message:"已撤销!"}))})})}}},G={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"requndone"},[s("el-table",{attrs:{data:e.requestions}},[s("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),s("el-table-column",{attrs:{prop:"id",label:"编号"}}),e._v(" "),s("el-table-column",{attrs:{prop:"title",label:"所属项目"}}),e._v(" "),s("el-table-column",{attrs:{label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e.formatDate(t.row.occurTime))+"\n            ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"当前状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e.stateEnum[t.row.state])+"\n            ")]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"description",label:"描述"}}),e._v(" "),s("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"text"},on:{click:function(s){e.goForDetail(t.row.id)}}},[e._v("查看详情")]),e._v(" "),s("el-button",{staticStyle:{color:"rgb(255, 208, 75)"},attrs:{type:"text"},on:{click:function(s){e.deleteRequestion(t.row.id,t.$index)}}},[e._v("撤销")])]}}])})],1)],1)},staticRenderFns:[]};var X=s("VU/8")(Y,G,!1,function(e){s("RD26")},null,null).exports,K={data:function(){return{stateEnum:B,requestions:[]}},created:function(){this.getUnremarkRequestion()},methods:{formatDate:m,getUnremarkRequestion:function(){var e=this,t=this.$store.state.token||localStorage.getItem("token")&&localStorage.getItem("token").slice(0,-5);this.$request.post("/test/getUnremarkRequestion").set("Authorization","Bearer "+t).end(function(t,s){t?(e.requestions=[],console.log(t)):e.requestions=s.body})},goForDetail:function(e){this.$router.push("/reimbursement/index/reqdetail?id="+e+"&isRemark=1")}}},Z={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"unremark"},[s("el-table",{attrs:{data:e.requestions}},[s("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),s("el-table-column",{attrs:{prop:"id",label:"编号"}}),e._v(" "),s("el-table-column",{attrs:{prop:"name",label:"申请人"}}),e._v(" "),s("el-table-column",{attrs:{prop:"title",label:"所属项目"}}),e._v(" "),s("el-table-column",{attrs:{label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e.formatDate(t.row.occurTime))+"\n            ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"当前状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e.stateEnum[t.row.state])+"\n            ")]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"description",label:"描述"}}),e._v(" "),s("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"text"},on:{click:function(s){e.goForDetail(t.row.id)}}},[e._v("查看详情")])]}}])})],1)],1)},staticRenderFns:[]};var ee=s("VU/8")(K,Z,!1,function(e){s("6Tya")},null,null).exports,te={data:function(){return{stateEnum:B,steps:P,param:{},requestions:[],daterange:[],limit:{offset:0,count:10},acount:0,projects:[]}},created:function(){this.getProjects()},methods:{formatDate:m,getProjects:function(){var e=this,t=this.$store.state.token||localStorage.getItem("token")&&localStorage.getItem("token").slice(0,-5);this.$request.post("/test/getProjects").set("Authorization","Bearer "+t).end(function(t,s){t?e.$message({type:"error",message:t.response.text}):e.projects=s.body})},getFindRequestion:function(e){var t=this;if(this.daterange&&this.daterange.length?(this.param.startDate=new Date(this.daterange[0]).getTime()+"",this.param.endDate=new Date(this.daterange[1]).getTime()+""):this.param.startDate=this.param.endDate="",this.param.id&&isNaN(+this.param.id))this.$message({type:"error",message:"请输入正确点申请单编号"});else{var s=this.$store.state.token||localStorage.getItem("token")&&localStorage.getItem("token").slice(0,-5);this.$request.post("/test/getFindRequestion").set("Authorization","Bearer "+s).send(D()({},this.param,{user:this.$store.state.user.id,limit:{offset:10*(e-1),count:10}})).end(function(e,s){e?t.$message({type:"error",message:e.response.text}):(t.requestions=s.body.results,t.acount=s.body.acount,0===s.body.acount&&t.$message({type:"warning",message:"没有查询到对应的申请单"}))})}},changePage:function(e){this.getFindRequestion(e)},goForDetail:function(e){this.$router.push("/reimbursement/index/detail?id="+e)}}},se={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"find"},[s("el-form",{attrs:{model:e.param,"label-width":".8rem",inline:!0}},[s("el-form-item",{attrs:{label:"申请编号"}},[s("el-input",{attrs:{placeholder:"请输入申请单的ID",clearable:""},model:{value:e.param.id,callback:function(t){e.$set(e.param,"id",t)},expression:"param.id"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"用户"}},[s("el-input",{attrs:{placeholder:"请输入用户名称或ID",clearable:""},model:{value:e.param.name,callback:function(t){e.$set(e.param,"name",t)},expression:"param.name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"请求状态"}},[s("el-select",{attrs:{clearable:""},model:{value:e.param.state,callback:function(t){e.$set(e.param,"state",t)},expression:"param.state"}},e._l(e.steps,function(e){return s("el-option",{key:e.state,attrs:{value:e.state,label:e.title}})}))],1),e._v(" "),s("el-form-item",{attrs:{label:"所属项目"}},[s("el-select",{attrs:{clearable:""},model:{value:e.param.project,callback:function(t){e.$set(e.param,"project",t)},expression:"param.project"}},e._l(e.projects,function(e){return s("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})}))],1),e._v(" "),s("el-form-item",{attrs:{label:"创建时间"}},[s("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"查询开始日期","end-placeholder":"查询结束日期"},model:{value:e.daterange,callback:function(t){e.daterange=t},expression:"daterange"}})],1),e._v(" "),s("el-button",{staticClass:"find",attrs:{type:"primary"},on:{click:function(t){e.getFindRequestion(1)}}},[e._v("查询")])],1),e._v(" "),s("p",{staticClass:"split"},[e._v("提示：将默认搜索用户自己的所有申请单，查询全部请在用户中输入all")]),e._v(" "),s("el-table",{attrs:{data:e.requestions}},[s("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),s("el-table-column",{attrs:{prop:"id",label:"编号"}}),e._v(" "),s("el-table-column",{attrs:{prop:"name",label:"申请人"}}),e._v(" "),s("el-table-column",{attrs:{prop:"title",label:"所属项目"}}),e._v(" "),s("el-table-column",{attrs:{label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e.formatDate(t.row.occurTime))+"\n            ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"当前状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e.stateEnum[t.row.state])+"\n            ")]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"description",label:"描述"}}),e._v(" "),s("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"text"},on:{click:function(s){e.goForDetail(t.row.id)}}},[e._v("查看详情")])]}}])})],1),e._v(" "),s("div",{staticClass:"page-wrapper"},[s("el-pagination",{attrs:{layout:"prev, pager, next",total:e.acount,"page-size":e.limit.count},on:{"current-change":e.changePage}})],1)],1)},staticRenderFns:[]};var ae=s("VU/8")(te,se,!1,function(e){s("xexC")},null,null).exports,re={components:{Requestion:U,ReimWrapper:O},data:function(){return{requestion:{},isRemark:!1}},created:function(){var e=p(location.href.split("?")[1]);e.isRemark&&(this.isRemark=!0),this.getRequestionDetail(e.id)},methods:{getRequestionDetail:function(e){var t=this,s=this.$store.state.token||localStorage.getItem("token")&&localStorage.getItem("token").slice(0,-5);this.$request.post("/test/getRequestionDetail").set("Authorization","Bearer "+s).send({id:e}).end(function(e,s){e?console.log(e):(t.requestion=s.body,t.requestion.approver=t.requestion.approver&&t.requestion.approver.split(","))})},dealOperate:function(e,t){var s=this;0===t?this.$confirm("请求撤销后无法恢复，您确定要撤销吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=s.$store.state.token||localStorage.getItem("token")&&localStorage.getItem("token").slice(0,-5);s.$request.post("/test/deleteRequestion").set("Authorization","Bearer "+e).send({uid:s.$store.state.user.id,id:s.requestion.id}).end(function(e,t){e?console.log(e):(s.$router.go(-1),s.$message({type:"success",message:"已撤销!"}))})}):this.$message({type:"error",message:"系统错误"})},remark:function(e,t){var s=this,a=this.$store.state.token||localStorage.getItem("token")&&localStorage.getItem("token").slice(0,-5);this.$request.post("/test/approveRequestion").set("Authorization","Bearer "+a).send({id:this.requestion.id,uid:this.$store.state.user.id,requester:this.requestion.requester,description:this.requestion.description,state:this.requestion.state,operate:e,reason:t}).end(function(e,t){e?console.log(e):(s.$message({type:"success",message:"已审批"}),s.getRequestionDetail(s.requestion.id))})}}},ie={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"detail"},[t("requestion",{attrs:{requestion:this.requestion,inline:!0,isRemark:this.isRemark},on:{operateRequestion:this.dealOperate,remarkRequestion:this.remark}})],1)},staticRenderFns:[]};var ne=s("VU/8")(re,ie,!1,function(e){s("+JPb")},"data-v-b7723e42",null).exports,oe={data:function(){return{stateEnum:B,requestions:[]}},created:function(){this.getUndoneReimbursement()},methods:{formatDate:m,getUndoneReimbursement:function(){var e=this,t=this.$store.state.token||localStorage.getItem("token")&&localStorage.getItem("token").slice(0,-5);this.$request.post("/test/getUndoneReimbursement").set("Authorization","Bearer "+t).end(function(t,s){t?(e.requestions=[],console.log(t)):e.requestions=s.body})},goForDetail:function(e){this.$router.push("/reimbursement/index/reimdetail?id="+e)}}},le={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"reimundone"},[s("el-table",{attrs:{data:e.requestions}},[s("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),s("el-table-column",{attrs:{prop:"id",label:"编号"}}),e._v(" "),s("el-table-column",{attrs:{prop:"title",label:"所属项目"}}),e._v(" "),s("el-table-column",{attrs:{label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e.formatDate(t.row.occurTime))+"\n            ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"当前状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e.stateEnum[t.row.state])+"\n            ")]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"description",label:"描述"}}),e._v(" "),s("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"text"},on:{click:function(s){e.goForDetail(t.row.id)}}},[e._v("查看详情")])]}}])})],1)],1)},staticRenderFns:[]};var ce=s("VU/8")(oe,le,!1,function(e){s("S3L7")},null,null).exports,ue={data:function(){return{stateEnum:B,requestions:[]}},created:function(){this.getUnremarkRequestion()},methods:{formatDate:m,getUnremarkRequestion:function(){var e=this,t=this.$store.state.token||localStorage.getItem("token")&&localStorage.getItem("token").slice(0,-5);this.$request.post("/test/getUnremarkRequestion").set("Authorization","Bearer "+t).send({id:this.$store.state.user.id}).end(function(t,s){t?(e.requestions=[],console.log(t)):e.requestions=s.body})},goForDetail:function(e){this.$router.push("/reimbursement/index/reimdetail?id="+e+"&isRemark=1")}}},de={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"reim-unremark"},[s("el-table",{attrs:{data:e.requestions}},[s("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),s("el-table-column",{attrs:{prop:"id",label:"编号"}}),e._v(" "),s("el-table-column",{attrs:{prop:"name",label:"申请人"}}),e._v(" "),s("el-table-column",{attrs:{prop:"title",label:"所属项目"}}),e._v(" "),s("el-table-column",{attrs:{label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e.formatDate(t.row.occurTime))+"\n            ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"当前状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e.stateEnum[t.row.state])+"\n            ")]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"description",label:"描述"}}),e._v(" "),s("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"text"},on:{click:function(s){e.goForDetail(t.row.id)}}},[e._v("查看详情")])]}}])})],1)],1)},staticRenderFns:[]};var me=s("VU/8")(ue,de,!1,function(e){s("qDz2")},null,null).exports,pe={components:{ReimWrapper:O},data:function(){return{steps:P,select:"",opts:[],requestion:{},reims:[],isRemark:!1,dialogVisible:!1,remarkResult:0,remarkReason:"",pics:[],selectPro:"",selectPro2:"",projects:[]}},created:function(){var e=p(location.href.split("?")[1]);e.isRemark&&(this.isRemark=!0),this.getRequestionDetail(e.id,this.getInvoices),this.getProjects()},methods:{formatDate:m,getProjects:function(){var e=this,t=this.$store.state.token||localStorage.getItem("token")&&localStorage.getItem("token").slice(0,-5);this.$request.post("/test/getProjects").set("Authorization","Bearer "+t).end(function(t,s){t?e.$message({type:"error",message:t.response.text}):e.projects=s.body})},acountMoney:function(){var e=[],t=this.reims.filter(function(e){return 34!==e.type}),s=this.reims.filter(function(e){return 34===e.type});return e[0]=this.calculateAcount(t),e[1]=this.calculateAcount(s),e},calculateAcount:function(e){return 0===e.length?0:1===e.length?e[0].money:e.reduce(function(e,t){return(e=e.money||e)+t.money})},endInvoice:function(){var e=this,t=this.$store.state.token||localStorage.getItem("token")&&localStorage.getItem("token").slice(0,-5);this.$request.post("/test/approveRequestion").set("Authorization","Bearer "+t).send({id:this.requestion.id,uid:this.$store.state.user.id,requester:this.requestion.requester,description:this.requestion.description,state:this.requestion.state,operate:0,reason:""}).end(function(t,s){t?e.$message({type:"error",message:t.response.text}):(e.$message({type:"success",message:"已完成"}),e.getRequestionDetail(e.requestion.id))})},removeInvoice:function(e){this.pics.splice(e,1)},getInvoices:function(){var e=this,t=this.$store.state.token||localStorage.getItem("token")&&localStorage.getItem("token").slice(0,-5);this.$request.post("/test/getInvoices").set("Authorization","Bearer "+t).send({requestion:this.requestion.id}).end(function(t,s){t?console.log(t):e.pics=s.body})},remarkClose:function(){this.dialogVisible=!1},remark:function(){var e=this;if(this.remarkResult||this.selectPro&&this.selectPro2)if(!this.remarkResult||this.remarkReason){var t=this.$store.state.token||localStorage.getItem("token")&&localStorage.getItem("token").slice(0,-5);this.$request.post("/test/approveRequestion").set("Authorization","Bearer "+t).send({id:this.requestion.id,uid:this.$store.state.user.id,oldProject:this.requestion.project,requester:this.requestion.requester,description:this.requestion.description,state:this.requestion.state,operate:this.remarkResult,reason:this.remarkReason,acountMoney:this.acountMoney(),project:this.selectPro,project2:this.selectPro2}).end(function(t,s){t?console.log(t):(e.$message({type:"success",message:"已审批"}),e.getRequestionDetail(e.requestion.id))}),this.dialogVisible=!1}else this.$message({type:"error",message:"请输入驳回原因"});else this.$message({type:"error",message:"请选择报销来源的项目"})},getRequestionDetail:function(e){var t=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,a=this.$store.state.token||localStorage.getItem("token")&&localStorage.getItem("token").slice(0,-5);this.$request.post("/test/getRequestionDetail").set("Authorization","Bearer "+a).send({id:e}).end(function(e,a){e?console.log(e):(t.requestion=a.body,t.selectPro=a.body.project,s&&s())}),this.$request.post("/test/getReimbursements").set("Authorization","Bearer "+a).send({id:e}).end(function(e,s){e?console.log(e):t.reims=s.body})},selectReq:function(e){this.requestion=this.opts[e]},addNewReim:function(e){var t=this;if(console.log(e),this.$store.state.user.id===this.requestion.requester)if(e){var s=this.$store.state.token||localStorage.getItem("token")&&localStorage.getItem("token").slice(0,-5);e.startDate=new Date(e.startDate).getTime()||"",e.startTime=new Date(e.startTime).getTime()||"",e.endDate=new Date(e.startDate).getTime()||"",e.endTime=new Date(e.endTime).getTime()||"",this.$request.post("/test/addReimbursement").set("Authorization","Bearer "+s).send(D()({requestion:this.requestion.id,uid:this.$store.state.user.id,project:this.requestion.project},e)).end(function(s,a){s?t.$message({type:"error",message:s.response.text}):(t.$message({type:"success",message:"添加成功"}),t.reims.push(D()({},e,{id:a.body.id,project:t.requestion.project})))})}else this.$message({type:"error",message:"请添加报销项"});else this.$message({type:"error",message:"系统错误"})},deleteReim:function(e,t){var s=this;this.$confirm("将会删除报销条目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a=s.$store.state.token||localStorage.getItem("token")&&localStorage.getItem("token").slice(0,-5);s.$request.post("/test/deleteReim").set("Authorization","Bearer "+a).send({id:e.id,project:e.project,money:e.money}).end(function(e,a){e?s.$message({type:"error",message:e.response.text}):(s.reims.splice(t,1),s.$message({type:"success",message:"删除成功!"}))})})}}},ve={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"create-reim"},[0!=e.requestion.state?s("el-steps",{staticClass:"state-wrapper",attrs:{active:e.requestion.state,"align-center":""}},e._l(e.steps,function(e){return s("el-step",{key:e.title,attrs:{title:e.title,description:e.desc}})})):e._e(),e._v(" "),e.requestion?s("el-form",{staticClass:"requestion-wrapper",attrs:{"label-width":"0.8rem",inline:!0},model:{value:e.requestion,callback:function(t){e.requestion=t},expression:"requestion"}},[s("el-form-item",{attrs:{label:"申请人:"}},[e._v("\n            "+e._s(e.requestion.name)+"\n        ")]),e._v(" "),s("el-form-item",{attrs:{label:"研究室:"}},[e._v("\n            "+e._s(e.$store.state.user.laboratory)+"\n        ")]),e._v(" "),s("el-form-item",{attrs:{label:"所属项目:"}},[s("span",[e._v(e._s(e.requestion.title))])]),e._v(" "),s("el-form-item",{attrs:{label:"申请时间:"}},[s("span",[e._v(e._s(e.formatDate(e.requestion.occurTime)))])]),e._v(" "),s("el-form-item",{attrs:{label:"申请描述:"}},[s("span",[e._v(e._s(e.requestion.description))])])],1):e._e(),e._v(" "),s("reim-wrapper",{attrs:{requestion:e.requestion,reims:e.reims,pics:e.pics,isRemark:e.isRemark},on:{addNewReim:e.addNewReim,deleteReim:e.deleteReim,removeInvoice:e.removeInvoice}}),e._v(" "),s("el-dialog",{attrs:{visible:e.dialogVisible,width:"30%","before-close":e.remarkClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[[s("el-radio",{attrs:{label:0},model:{value:e.remarkResult,callback:function(t){e.remarkResult=t},expression:"remarkResult"}},[e._v("通过")]),e._v(" "),s("el-radio",{attrs:{label:1},model:{value:e.remarkResult,callback:function(t){e.remarkResult=t},expression:"remarkResult"}},[e._v("驳回")])],e._v(" "),e.remarkResult?e._e():s("div",[s("span",[e._v("请选择报销项目：")]),e._v(" "),s("el-select",{model:{value:e.selectPro,callback:function(t){e.selectPro=t},expression:"selectPro"}},e._l(e.projects,function(e){return s("el-option",{key:e.id,attrs:{value:e.id,label:e.title}})}))],1),e._v(" "),e.remarkResult?e._e():s("div",{staticStyle:{"margin-top":".1rem"}},[s("span",[e._v("市内交通报销项目：")]),e._v(" "),s("el-select",{model:{value:e.selectPro2,callback:function(t){e.selectPro2=t},expression:"selectPro2"}},e._l(e.projects,function(e){return s("el-option",{key:e.id,attrs:{value:e.id,label:e.title}})}))],1),e._v(" "),e.remarkResult?s("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入驳回原因"},model:{value:e.remarkReason,callback:function(t){e.remarkReason=t},expression:"remarkReason"}}):e._e(),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.remark}},[e._v("确 定")])],1)],2),e._v(" "),s("div",{staticClass:"operate-wrapper"},[e.requestion.state>=3&&e.requestion.state<4&&e.isRemark?s("el-button",{staticClass:"submit",attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("审批")]):e._e(),e._v(" "),4===e.requestion.state&&e.isRemark?s("el-button",{staticClass:"submit",attrs:{type:"primary"},on:{click:e.endInvoice}},[e._v("已收票")]):e._e()],1)],1)},staticRenderFns:[]};var fe=s("VU/8")(pe,ve,!1,function(e){s("5v0L")},null,null).exports,he={components:{Requestion:U,ReimWrapper:O},data:function(){return{feeTypesEnum:A,requestion:{user:"",name:"",laboratory:"",state:0,dataRange:[],way:30,destination:"",description:"",approver:[]},reims:[],pics:[]}},created:function(){var e=p(location.href.split("?")[1]);e.isRemark&&(this.isRemark=!0),this.getRequestionDetail(e.id,this.getInvoices)},methods:{formatDate:m,getInvoices:function(){var e=this,t=this.$store.state.token||localStorage.getItem("token")&&localStorage.getItem("token").slice(0,-5);this.$request.post("/test/getInvoices").set("Authorization","Bearer "+t).send({requestion:this.requestion.id}).end(function(t,s){t?e.$message({type:"error",message:t.response.text}):e.pics=s.body})},getRequestionDetail:function(e){var t=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,a=this.$store.state.token||localStorage.getItem("token")&&localStorage.getItem("token").slice(0,-5);this.$request.post("/test/getRequestionDetail").set("Authorization","Bearer "+a).send({id:e}).end(function(e,a){e?t.$message({type:"error",message:e.response.text}):(t.requestion=a.body,s())}),this.$request.post("/test/getReimbursements").set("Authorization","Bearer "+a).send({id:e}).end(function(e,s){e?t.$message({type:"error",message:e.response.text}):t.reims=s.body})},addNewReim:function(e){var t=this;if(this.$store.state.user.id===this.requestion.requester)if(e){var s=this.$store.state.token||localStorage.getItem("token")&&localStorage.getItem("token").slice(0,-5);e.startDate=new Date(e.startDate).getTime(),e.startTime=new Date(e.startTime).getTime(),e.endDate=new Date(e.startDate).getTime(),e.endTime=new Date(e.endTime).getTime(),this.$request.post("/test/addReimbursement").set("Authorization","Bearer "+s).send(D()({requestion:this.requestion.id,uid:this.$store.state.user.id,project:this.requestion.project},e)).end(function(s,a){s?t.$message({type:"error",message:s.response.text}):(t.$message({type:"success",message:"添加成功"}),t.reims.push(e))})}else this.$message({type:"error",message:"请添加报销项"});else this.$message({type:"error",message:"系统错误"})},deleteReim:function(e,t){var s=this;this.$confirm("将会删除报销条目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a=s.$store.state.token||localStorage.getItem("token")&&localStorage.getItem("token").slice(0,-5);s.$request.post("/test/deleteReim").set("Authorization","Bearer "+a).send({id:e}).end(function(e,a){e?s.$message({type:"error",message:e.response.text}):(s.reims.splice(t,1),s.$message({type:"success",message:"删除成功!"}))})})},removeInvoice:function(e){this.pics.splice(e,1)}}},ge={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"detail"},[s("requestion",{attrs:{id:"requestion",requestion:e.requestion,inline:!0}}),e._v(" "),s("reim-wrapper",{attrs:{requestion:e.requestion,reims:e.reims,pics:e.pics},on:{addNewReim:e.addNewReim,deleteReim:e.deleteReim,removeInvoice:e.removeInvoice}})],1)},staticRenderFns:[]};var _e=s("VU/8")(he,ge,!1,function(e){s("P+gK")},"data-v-9f2c641e",null).exports,be=s("woOf"),ke=s.n(be),ye=s("//Fk"),we=s.n(ye);var $e={props:{reims:{type:Array,default:function(){return[]}}},data:function(){return{feeTypesEnum:A}},methods:{formatDate:m,formatTime:d,setSeat:function(e,t){return t?F[e][t].label:""}}},qe={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"statistic-infor"},[s("el-table",{staticClass:"reimbursement-wrapper",staticStyle:{width:"100%"},attrs:{data:e.reims}},[s("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),s("el-table-column",{attrs:{label:"申请人",prop:"name"}}),e._v(" "),s("el-table-column",{attrs:{label:"费用类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e.feeTypesEnum[t.row.type])+"\n            ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"开始日期",width:"95"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e.formatDate(t.row.startDate))+"\n            ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"开始时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e.formatTime(t.row.startTime))+"\n            ")]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"startAddress",label:"起点"}}),e._v(" "),s("el-table-column",{attrs:{label:"结束日期",width:"95"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e.formatDate(t.row.endDate))+"\n            ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"结束时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e.formatTime(t.row.endTime))+"\n            ")]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"endAddress",label:"止点"}}),e._v(" "),s("el-table-column",{attrs:{label:"席别"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e.setSeat(t.row.type,t.row.seat))+"\n            ")]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"desc",label:"费用描述"}}),e._v(" "),s("el-table-column",{attrs:{prop:"money",label:"金额"}}),e._v(" "),s("el-table-column",{attrs:{prop:"note",label:"备注"}})],1)],1)},staticRenderFns:[]};var xe={data:function(){return{params:{id:"",laboratory:"",project:"",start:"",end:"",type:3},projects:[],type:3}},created:function(){this.getProjects(),this.getStatisticDate()},watch:{type:function(e,t){this.params.type=e,this.params.start=this.params.end=""}},methods:{getProjects:function(){var e=this,t=this.$store.state.token||localStorage.getItem("token")&&localStorage.getItem("token").slice(0,-5);this.$request.post("/test/getProjects").set("Authorization","Bearer "+t).end(function(t,s){t?e.$message({type:"error",message:t.response.text}):e.projects=s.body})},getStatisticDate:function(){var e=this,t=D()({},this.params);t.id||(t.id=this.$store.state.user.id||localStorage.user),"all"===t.id&&(t.id=""),t.start||t.end||(t.end=(new Date).setHours(0,0,0,0),t.start=new Date(t.end).setMonth(new Date(t.end).getMonth()-9),this.params.type=this.type=t.type=3);var s=this.$store.state.token||localStorage.getItem("token")&&localStorage.getItem("token").slice(0,-5);this.$request.post("/test/getStatisticDate").set("Authorization","Bearer "+s).send(t).end(function(s,a){s?e.$message({type:"error",message:s.response.text}):e.$emit("setData",a.body,t)})}}},Ce={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"statistic-param"},[s("el-form",{attrs:{model:e.params,"label-width":".7rem",inline:!0}},[e.$store.state.user&&e.$store.state.user.level>0?s("el-form-item",{attrs:{label:"申请人"}},[s("el-input",{attrs:{placeholder:"请输入用户ID",clearable:""},model:{value:e.params.id,callback:function(t){e.$set(e.params,"id",t)},expression:"params.id"}})],1):e._e(),e._v(" "),s("el-form-item",{attrs:{label:"研究室"}},[s("el-input",{attrs:{placeholder:"请输入研究室名称"},model:{value:e.params.laboratory,callback:function(t){e.$set(e.params,"laboratory",t)},expression:"params.laboratory"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"项目"}},[s("el-select",{attrs:{clearable:""},model:{value:e.params.project,callback:function(t){e.$set(e.params,"project",t)},expression:"params.project"}},e._l(e.projects,function(e){return s("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})}))],1),e._v(" "),s("el-form-item",{staticClass:"select-type"},[s("el-radio",{attrs:{label:0},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[e._v("按年度")]),e._v(" "),s("el-radio",{attrs:{label:1},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[e._v("按具体日期")])],1),e._v(" "),s("el-form-item",{attrs:{label:"起始时间"}},[s("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:0===e.type,expression:"type===0"}],attrs:{type:"year",placeholder:"起始年份","value-format":"timestamp"},model:{value:e.params.start,callback:function(t){e.$set(e.params,"start",t)},expression:"params.start"}}),e._v(" "),s("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:0!==e.type,expression:"type!==0"}],attrs:{placeholder:"起始日期","value-format":"timestamp"},model:{value:e.params.start,callback:function(t){e.$set(e.params,"start",t)},expression:"params.start"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"结束时间"}},[s("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:0===e.type,expression:"type===0"}],attrs:{type:"year",placeholder:"终止年份","value-format":"timestamp"},model:{value:e.params.end,callback:function(t){e.$set(e.params,"end",t)},expression:"params.end"}}),e._v(" "),s("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:0!==e.type,expression:"type!==0"}],attrs:{placeholder:"结束日期","value-format":"timestamp"},model:{value:e.params.end,callback:function(t){e.$set(e.params,"end",t)},expression:"params.end"}})],1),e._v(" "),s("div",{staticClass:"submit"},[s("el-button",{attrs:{type:"primary"},on:{click:e.getStatisticDate}},[e._v("查询")])],1)],1)],1)},staticRenderFns:[]};var Re={components:{StatisticInfor:s("VU/8")($e,qe,!1,function(e){s("cpeJ")},null,null).exports,StatisticParam:s("VU/8")(xe,Ce,!1,function(e){s("d7VV")},null,null).exports},data:function(){return{param:{id:"",dateRange:[]},projects:[],reims:[],person_month_reims:[],person_project_reims:[],person_type_reims:[],chart:[],pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()}}}},mounted:function(){var e=this;this.chart[0]=this.$chart.init(this.$refs.chart,"light"),this.chart[1]=this.$chart.init(this.$refs.chart2,"light"),this.chart[2]=this.$chart.init(this.$refs.chart3,"light"),this.chart[0].on("click",this.selectDate),this.chart[1].on("click",this.selectProject),this.chart[2].on("click",this.selectType),window.onresize=function(){e.chart.forEach(function(e){e.resize()})}},methods:{formatDate:m,formatTime:d,setData:function(e,t){var s,a,r=this,i=this.chart;e&&0===e.length&&this.$message({type:"warning",message:"没有数据哦~"}),this.reims=e,0===t.type?(s=t.start,a=t.end,new we.a(function(e,t){if(s&&a&&s<=a){var r=[];s=new Date(+s).getFullYear(),a=new Date(+a).getFullYear();for(var i=s;i<=a;i++)r.push(i);e(r)}else e([])})).then(function(t){var s=function(e,t){var s=new Array(t.length).fill(0),a=new Array(t.length).fill(0);return e.forEach(function(e){var r=new Date(+e.startDate).getFullYear(),i=t.indexOf(r);-1!==i&&(a[i]=h(a[i],+e.money),e.state>=4&&(s[i]=h(s[i],+e.money)))}),{allResult:a,result:s}}(e,t);console.log(s),r.createPersonOption(t,s.result,"line",i[0],{},s.allResult)}):function(e,t){return new we.a(function(s,a){if(e&&t){var r=[];e=m(e),t=m(t);var i=e.split("/"),n=t.split("/");for(i.splice(2,1),n.splice(2,1),r.push(i.join("-"));i[0]<n[0]||i[1]<n[1];)i[1]=Number(i[1])+1,Number(i[1])>12&&(i[0]=Number(i[0])+1,i[1]=1),i[1]<10&&(i[1]="0"+i[1]),r.push(i.join("-"));s(r)}a(new Error("can not create sbscissa"))})}(t.start,t.end).then(function(t){var s=function(e,t){var s=new Array(t.length).fill(0),a=new Array(t.length).fill(0);return e.forEach(function(e){var r=m(e.startDate||e.reqStart).split("/"),i=t.indexOf(r[0]+"-"+r[1]);-1!==i&&(a[i]=h(a[i],Number(e.money)),e.state>=4&&(s[i]=h(s[i],Number(e.money))))}),{result:s,allResult:a}}(e,t);r.createPersonOption(t,s.result,"line",i[0],{},s.allResult)});var n=function(e){var t={x:[],data:[],allData:[]};return e.forEach(function(e){var s=t.x.indexOf(e.pid+":"+e.title);-1===s?(t.x.push(e.pid+":"+e.title),t.allData.push(+e.money),e.state>=4&&t.data.push(+e.money)):(t.allData[s]=h(t.allData[s],+e.money),e.state>=4&&(t.data[s]=h(t.data[s],+e.money)))}),t}(e),o=function(e){var t=[],s=[];return e.forEach(function(e){var a=t.indexOf(e.type+":"+A[e.type]);-1===a?(t.push(e.type+":"+A[e.type]),s.push({value:+e.money,name:e.type+":"+A[e.type]})):s[a].value=h(s[a].value,+e.money)}),{x:t,result:s}}(e);this.createPersonOption(n.x,n.data,"bar",i[1],{},n.allData),this.createPieOption(o,i[2])},createPersonOption:function(e,t,s,a,r,i){var n={tooltip:{},legend:{right:0,data:["消费","预支总消费"]},xAxis:{type:"category",data:e},dataZoom:[{xAxisIndex:0}],yAxis:{},series:[{name:"消费",type:s,data:t}]};i&&n.series.unshift({name:"预支总消费",type:s,data:i}),n=ke()({},n,r),a.hideLoading(),a.setOption(n)},createPieOption:function(e,t,s){var a={tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",top:"middle",right:"20%",data:e.x},series:[{name:"消费类型",type:"pie",radius:"55%",center:["38%","50%"],data:e.result.sort(function(e,t){return e.value-t.value}),label:{normal:{textStyle:{color:"rgba(0, 0, 0, 0.5)"}}},labelLine:{normal:{lineStyle:{color:"rgba(0, 0, 0, 0.5)"},smooth:.2,length:10,length2:20}},animationType:"scale",animationEasing:"elasticOut",animationDelay:function(e){return 200*Math.random()}}]};t.hideLoading(),t.setOption(a)},selectDate:function(e){var t=e.name.split("-"),s=void 0;0===e.seriesIndex?s=this.reims.filter(function(e){var s=m(e.startDate||e.reqStart).split("/");if(2===t.length){if(s[0]===t[0]&&s[1]===t[1])return!0}else if(s[0]===t[0])return!0;return!1}):1===e.seriesIndex&&(s=this.reims.filter(function(e){if(e.state<4)return!1;var s=m(e.startDate||e.reqStart).split("/");if(2===t.length){if(s[0]===t[0]&&s[1]===t[1])return!0}else if(s[0]===t[0])return!0;return!1})),this.person_month_reims=s},selectProject:function(e){var t=e.name.split(":"),s=void 0;s=0===e.seriesIndex?this.reims.filter(function(e){return e.pid===+t[0]}):this.reims.filter(function(e){return!(e.state<4)&&e.pid===+t[0]}),this.person_project_reims=s},selectType:function(e){var t=e.name.split(":"),s=this.reims.filter(function(e){return e.type===+t[0]});this.person_type_reims=s}}},Ie={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"statistic"},[s("el-container",[s("el-aside",[s("div",{staticClass:"condition"},[s("statistic-param",{on:{setData:e.setData}})],1)]),e._v(" "),s("el-main",[s("div",{staticClass:"content"},[s("p",{staticClass:"split"},[e._v("提示：将默认对当前用户数据进行统计"),e.$store.state.user.level>=1?s("span",[e._v("，搜索全部成员请输入all")]):e._e()]),e._v(" "),s("p",{staticClass:"title"},[e._v("时间报销统计（单位：￥）")]),e._v(" "),s("div",{ref:"chart",staticClass:"charts"}),e._v(" "),s("statistic-infor",{attrs:{reims:e.person_month_reims}}),e._v(" "),s("p",{staticClass:"title"},[e._v("项目报销统计（单位：￥）")]),e._v(" "),s("div",{ref:"chart2",staticClass:"charts"}),e._v(" "),s("statistic-infor",{attrs:{reims:e.person_project_reims}}),e._v(" "),s("p",{staticClass:"title"},[e._v("消费类型报销统计（单位：￥）")]),e._v(" "),s("div",{ref:"chart3",staticClass:"pie-chart"}),e._v(" "),s("statistic-infor",{staticClass:"last-infor",attrs:{reims:e.person_type_reims}})],1)])],1)],1)},staticRenderFns:[]};var Se=s("VU/8")(Re,Ie,!1,function(e){s("HQP3")},"data-v-4f8fe99f",null).exports,De=s("mvHQ"),Te=s.n(De),je={data:function(){return{login:!0,checked:!1,registerInfor:{laboratory:"",id:"",pwd:"",confirm:"",name:"",phone:"",Email:"",jobTitle:""},loginInfor:{id:"",pwd:""},param:{}}},created:function(){this.param=p(location.href.split("?")[1])},mounted:function(){var e=localStorage.getItem("users");e&&(this.checked=!0,e=JSON.parse(e),this.loginInfor=e)},methods:{checkInputID:function(e){/[0-9a-zA-Z_]/g.test(e.data)||(this.registerInfor.id=this.registerInfor.id.slice(0,-1))},checkInputPhone:function(e){(e.data&&!/[0-9]/g.test(e.data)||this.registerInfor.phone.length>11)&&(this.registerInfor.phone=this.registerInfor.phone.slice(0,-1))},handlelogin:function(){var e=this;this.loginInfor.id?this.loginInfor.pwd?this.$request.post("/test/login").send(D()({},this.loginInfor,{pwd:f(this.loginInfor.pwd)})).end(function(t,s){if(t)e.$message({type:"error",message:t.status+": "+t.response.text});else{e.checked&&localStorage.setItem("localInfor",{id:e.loginInfor.id,pwd:e.loginInfor.pwd,checked:!0});var a=v("http://localhost:3000/",{token:s.body.result.id});if(a.on("message",function(t){var s=JSON.parse(t);e.$notify.info({title:"通知",dangerouslyUseHTMLString:!0,message:s.data,duration:6e3})}),e.checked){var r={id:e.loginInfor.id,pwd:e.loginInfor.pwd};localStorage.setItem("users",Te()(r))}else localStorage.setItem("users","");e.$store.commit("setSocket",a),e.$store.commit("setUser",s.body.result),e.$store.commit("setToken",s.body.token),localStorage.setItem("token",s.body.token+Math.random().toFixed(3)),localStorage.setItem("user",s.body.result.id),"manager"===e.param.type?location.href=location.origin+"/#/manage?token="+s.body.token+Math.random().toFixed(3):e.$router.push("/index")}}):this.$message("密码错误"):this.$message("请输入用户名")},register:function(){var e=this;this.registerInfor.id?this.registerInfor.pwd?this.registerInfor.pwd!==this.registerInfor.confirm?this.$message("两次密码不一致"):this.registerInfor.name?11!==this.registerInfor.phone.length?this.$message("请输入正确的手机号"):this.$request.post("/test/register").send(D()({},this.registerInfor,{pwd:f(this.registerInfor.pwd)})).end(function(t,s){t?e.$message({type:"error",message:t.response.text}):(e.$message({type:"success",message:"注册成功"}),e.loginInfor.id=e.registerInfor.id,e.loginInfor.pwd=e.registerInfor.pwd,e.registerInfor={laboratory:"",id:"",pwd:"",confirm:"",name:"",phone:"",Email:""},e.login=!0)}):this.$message("请填写真实姓名"):this.$message("密码不能为空"):this.$message("用户名不能为空")}}},Ae={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login"},[e.login?s("div",{staticClass:"wrapper form-wrapper"},[s("p",{staticClass:"title"},[e._v("实验室差旅报销系统")]),e._v(" "),s("div",{staticClass:"input-wrapper"},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-xingmingyonghumingnicheng"}})]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.loginInfor.id,expression:"loginInfor.id"}],attrs:{type:"text",placeholder:"输入用户名/手机号"},domProps:{value:e.loginInfor.id},on:{input:function(t){t.target.composing||e.$set(e.loginInfor,"id",t.target.value)}}})]),e._v(" "),s("div",{staticClass:"input-wrapper"},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-icon-"}})]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.loginInfor.pwd,expression:"loginInfor.pwd"}],attrs:{type:"password",placeholder:"输入密码"},domProps:{value:e.loginInfor.pwd},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.handlelogin(t)},input:function(t){t.target.composing||e.$set(e.loginInfor,"pwd",t.target.value)}}})]),e._v(" "),s("div",{staticClass:"help"},[s("el-checkbox",{staticClass:"check",model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("记住密码")]),e._v(" "),s("span",{staticClass:"forget"},[e._v("忘记密码？")])],1),e._v(" "),s("div",{staticClass:"submit"},[s("el-button",{on:{click:e.handlelogin}},[e._v("登入")])],1),e._v(" "),s("div",{staticClass:"register"},[s("span",[e._v("还没有账号?")]),e._v(" "),s("span",{staticClass:"content",on:{click:function(t){e.login=!1}}},[e._v("注册")])])]):s("div",{staticClass:"wrapper register-wrapper"},[s("span",{staticClass:"goback",on:{click:function(t){e.login=!0}}},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-fanhui"}})])]),e._v(" "),s("span",[e._v("注册")]),e._v(" "),s("div",{staticClass:"input-wrapper"},[s("span",{staticClass:"label"},[e._v("用户名")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.registerInfor.id,expression:"registerInfor.id"}],attrs:{placeholder:"输入用户名"},domProps:{value:e.registerInfor.id},on:{input:[function(t){t.target.composing||e.$set(e.registerInfor,"id",t.target.value)},e.checkInputID]}})]),e._v(" "),s("div",{staticClass:"input-wrapper"},[s("span",{staticClass:"label"},[e._v("密码")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.registerInfor.pwd,expression:"registerInfor.pwd"}],attrs:{type:"password",placeholder:"输入密码"},domProps:{value:e.registerInfor.pwd},on:{input:function(t){t.target.composing||e.$set(e.registerInfor,"pwd",t.target.value)}}})]),e._v(" "),s("div",{staticClass:"input-wrapper"},[s("span",{staticClass:"label"},[e._v("确认")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.registerInfor.confirm,expression:"registerInfor.confirm"}],attrs:{type:"password",placeholder:"再次输入密码"},domProps:{value:e.registerInfor.confirm},on:{input:function(t){t.target.composing||e.$set(e.registerInfor,"confirm",t.target.value)}}})]),e._v(" "),s("div",{staticClass:"input-wrapper"},[s("span",{staticClass:"label"},[e._v("姓名")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.registerInfor.name,expression:"registerInfor.name"}],attrs:{placeholder:"输入真实姓名"},domProps:{value:e.registerInfor.name},on:{input:function(t){t.target.composing||e.$set(e.registerInfor,"name",t.target.value)}}})]),e._v(" "),s("div",{staticClass:"input-wrapper"},[s("span",{staticClass:"label"},[e._v("职称")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.registerInfor.jobTitle,expression:"registerInfor.jobTitle"}],attrs:{placeholder:"输入职称"},domProps:{value:e.registerInfor.jobTitle},on:{input:function(t){t.target.composing||e.$set(e.registerInfor,"jobTitle",t.target.value)}}})]),e._v(" "),s("div",{staticClass:"input-wrapper"},[s("span",{staticClass:"label"},[e._v("手机")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.registerInfor.phone,expression:"registerInfor.phone"}],attrs:{placeholder:"输入手机号码"},domProps:{value:e.registerInfor.phone},on:{input:[function(t){t.target.composing||e.$set(e.registerInfor,"phone",t.target.value)},e.checkInputPhone]}})]),e._v(" "),s("div",{staticClass:"input-wrapper"},[s("span",{staticClass:"label"},[e._v("邮箱")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.registerInfor.Email,expression:"registerInfor.Email"}],attrs:{placeholder:"输入邮箱地址"},domProps:{value:e.registerInfor.Email},on:{input:function(t){t.target.composing||e.$set(e.registerInfor,"Email",t.target.value)}}})]),e._v(" "),s("div",{staticClass:"input-wrapper"},[s("span",{staticClass:"label"},[e._v("研究室")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.registerInfor.laboratory,expression:"registerInfor.laboratory"}],attrs:{placeholder:"输入所在研究室"},domProps:{value:e.registerInfor.laboratory},on:{input:function(t){t.target.composing||e.$set(e.registerInfor,"laboratory",t.target.value)}}})]),e._v(" "),s("div",{staticClass:"submit",on:{click:e.register}},[s("el-button",[e._v("注册")])],1)])])},staticRenderFns:[]};var Pe=s("VU/8")(je,Ae,!1,function(e){s("7ytx")},null,null).exports,Be={data:function(){return{imageUrl:"",user:{},update:!1,newMsgs:[],msgs:[],limit:{limit:20,offset:0},show:{title:""},dialogVisible:!1,requestable:!0}},created:function(){this.$store.state.token||localStorage.getItem("token")&&localStorage.getItem("token").slice(0,-5)||this.$router.replace("/login"),this.getMessage()},mounted:function(){var e=this;this.user=D()({},this.$store.state.user),this.user.id||setTimeout(function(){e.user=D()({},e.$store.state.user)},500),this.setScrollEvent()},computed:{uploadHeaders:function(){return{Authorization:"Bearer "+(this.$store.state.token||localStorage.getItem("token")&&localStorage.getItem("token").slice(0,-5))}}},methods:{formatDate:m,cancelUpdate:function(){this.user=D()({},this.$store.state.user),this.update=!1},handleAvatarSuccess:function(e,t){this.$store.commit("setAvatar",e.url),this.user.avatar=e.url,this.imageUrl=URL.createObjectURL(t.raw)},beforeAvatarUpload:function(e){var t=e.size/1024/1024<2;return t||this.$message.error("上传头像图片大小不能超过 2MB!"),t},setScrollEvent:function(){var e=this,t=this.$refs.message;console.log(t.offsetTop,t.offsetHeight),t.addEventListener("scroll",function(s){t.scrollTop+t.offsetHeight===t.scrollHeight&&e.requestable&&(e.requestable=!1,e.getMessage(),setTimeout(function(){e.requestable=!0},1e3))})},submit:function(){var e=this,t=this.$store.state.token||localStorage.getItem("token")&&localStorage.getItem("token").slice(0,-5);this.$request.post("/test/updateUserInfor").set("Authorization","Bearer "+t).send(this.user).end(function(t,s){t?e.$message({type:"error",message:t.response.text}):(e.update=!1,e.$store.commit("setUser",e.user),e.$message({type:"success",message:"修改成功"}))})},logout:function(){var e=this,t=this.$store.state.token||localStorage.getItem("token")&&localStorage.getItem("token").slice(0,-5);this.$request.post("/test/logout").set("Authorization","Bearer "+t).end(function(t,s){t?e.$message({type:"error",message:t.response.text}):(localStorage.removeItem("token"),e.$store.state.socket.disconnect(!0),e.$store.commit("logout"),e.$router.replace("/login"))})},getMessage:function(){var e=this,t=this.$store.state.token||localStorage.getItem("token")&&localStorage.getItem("token").slice(0,-5);this.$request.post("/test/getMessage").set("Authorization","Bearer "+t).send(this.limit).end(function(t,s){t?e.$message({type:"error",message:t.response.text}):(e.limit.offset+=s.body.length,s.body.map(function(t){0===t.state?e.newMsgs.push(t):e.msgs.push(t)}))})},showMessage:function(e,t,s){var a=this,r=this.$store.state.token||localStorage.getItem("token")&&localStorage.getItem("token").slice(0,-5);this.show=e,this.dialogVisible=!0,0===s&&this.$request.post("/test/readMessage").set("Authorization","Bearer "+r).send({uid:e.uid,id:e.id}).end(function(s,r){s?a.$message({type:"error",message:s.response.text}):(a.newMsgs.splice(t,1),a.msgs.unshift(e))})}}},Fe={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"user"},[s("el-container",[s("el-main",[s("div",{staticClass:"avatar"},[s("img",{staticClass:"avatar-pic",attrs:{src:e.$store.state.user.avatar}}),e._v(" "),s("el-upload",{staticClass:"avatar-uploader",attrs:{action:"test/uploadUserAvatar/","show-file-list":!1,accept:"image/*",headers:e.uploadHeaders,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?s("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),s("el-form",{attrs:{model:e.user,"label-position":"right","label-width":"2rem"}},[s("el-form-item",{attrs:{label:"用户ID："}},[s("span",[e._v(e._s(e.user.id))])]),e._v(" "),s("el-form-item",{attrs:{label:"姓名："}},[e.update?s("el-input",{attrs:{placeholder:"请输入"},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}}):s("span",[e._v(e._s(e.user.name))])],1),e._v(" "),s("el-form-item",{attrs:{label:"职称："}},[s("span",[e._v(e._s(e.user.jobTitle))])]),e._v(" "),s("el-form-item",{attrs:{label:"联系电话："}},[e.update?s("el-input",{attrs:{placeholder:"请输入"},model:{value:e.user.phone,callback:function(t){e.$set(e.user,"phone",t)},expression:"user.phone"}}):s("span",[e._v(e._s(e.user.phone))])],1),e._v(" "),s("el-form-item",{attrs:{label:"邮箱地址："}},[e.update?s("el-input",{attrs:{placeholder:"请输入"},model:{value:e.user.Email,callback:function(t){e.$set(e.user,"Email",t)},expression:"user.Email"}}):s("span",[e._v(e._s(e.user.Email))])],1),e._v(" "),s("el-form-item",{attrs:{label:"权限等级："}},[s("span",[e._v(e._s(e.user.level))])]),e._v(" "),s("el-form-item",{attrs:{label:"所属研究室："}},[e.update?s("el-input",{attrs:{placeholder:"请输入"},model:{value:e.user.laboratory,callback:function(t){e.$set(e.user,"laboratory",t)},expression:"user.laboratory"}}):s("span",[e._v(e._s(e.user.laboratory))])],1)],1),e._v(" "),e.update?s("div",{staticClass:"button-wrapper"},[s("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("\n                    提交修改\n                ")]),e._v(" "),s("el-button",{on:{click:e.cancelUpdate}},[e._v("\n                    取消\n                ")])],1):s("div",{staticClass:"button-wrapper"},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.update=!0}}},[e._v("\n                    修改\n                ")]),e._v(" "),s("el-button",{attrs:{type:"danger"},on:{click:e.logout}},[e._v("注销")])],1)],1),e._v(" "),s("el-aside",[s("p",{staticClass:"title"},[e._v("消息")]),e._v(" "),s("div",{ref:"message",staticClass:"message-wrapper"},[s("ul",{staticClass:"new"},e._l(e.newMsgs,function(t,a){return s("li",{key:t.id,staticClass:"message-content",on:{click:function(s){e.showMessage(t,a,0)}}},[s("span",{staticClass:"title"},[e._v(e._s(t.title))]),e._v(" "),s("span",{staticClass:"content",domProps:{innerHTML:e._s(t.data)}}),e._v(" "),s("span",{staticClass:"time"},[e._v(e._s(e.formatDate(t.occurTime)))])])})),e._v(" "),s("ul",{staticClass:"old"},e._l(e.msgs,function(t,a){return s("li",{key:t.id,staticClass:"message-content",on:{click:function(s){e.showMessage(t,a,1)}}},[s("span",{staticClass:"title"},[e._v(e._s(t.title))]),e._v(" "),s("span",{staticClass:"content",domProps:{innerHTML:e._s(t.data)}}),e._v(" "),s("span",{staticClass:"time"},[e._v(e._s(e.formatDate(t.occurTime)))])])})),e._v(" "),e.msgs.length||e.newMsgs.length?e._e():s("p",{staticClass:"empty"},[e._v("没有消息~")])])])],1),e._v(" "),s("el-dialog",{attrs:{title:e.show.title,visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[s("span",{domProps:{innerHTML:e._s(e.show.data)}}),e._v(" "),s("p",{staticStyle:{"text-align":"right"}},[e._v(e._s(e.formatDate(e.show.occurTime)))]),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var Ee=s("VU/8")(Be,Fe,!1,function(e){s("ef+N")},null,null).exports,ze={data:function(){return{param:{id:"",title:"",occurTime:""},projects:[],total:0,limit:{limit:20,offset:0},currentProject:[],update:!1}},computed:{hasACC:function(){return 2===this.$store.state.user.level}},methods:{formatDate:m,changePage:function(e){this.limit.offset=20*(e-1),this.getFindProjects()},updateProject:function(e,t){var s=this,a=this.$store.state.token||localStorage.getItem("token")&&localStorage.getItem("token").slice(0,-5);e.update?this.$request.post("/test/updateProject").set("Authorization","Bearer "+a).send(D()({},e)).end(function(t,a){t?s.$message({type:"error",message:t.response.text}):(s.$message({type:"success",message:"修改成功"}),e.update=!1)}):(this.currentProject[t]=D()({},e),e.update=!0)},cancelUpdateProject:function(e,t){this.projects[t].description=this.currentProject[t].description,this.projects[t].funding=this.currentProject[t].funding,this.projects[t].overflow=this.currentProject[t].overflow,this.projects[t].update=!1},getClass:function(e){return+e.alloverhead>=+e.funding*(1+e.overflow/100)-100?"danger":""},getFindProjects:function(){var e=this,t=this.$store.state.token||localStorage.getItem("token")&&localStorage.getItem("token").slice(0,-5);this.$request.post("/test/getFindProjects").set("Authorization","Bearer "+t).send({query:this.param,limit:this.limit}).end(function(t,s){t?e.$message({type:"error",message:t.response.text}):(e.projects=s.body.result.map(function(e){return D()({},e,{update:!1})}),e.total=s.body.total)})}}},Ue={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"project"},[s("el-container",[s("el-aside",[s("el-form",{attrs:{model:e.param}},[s("el-form-item",{attrs:{label:"项目编号"}},[s("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.param.id,callback:function(t){e.$set(e.param,"id",t)},expression:"param.id"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"创建日期"}},[s("el-date-picker",{attrs:{"value-format":"timestamp",placeholder:"请输入"},model:{value:e.param.occurTime,callback:function(t){e.$set(e.param,"occurTime",t)},expression:"param.occurTime"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"项目名称"}},[s("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.param.title,callback:function(t){e.$set(e.param,"title",t)},expression:"param.title"}})],1),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.getFindProjects}},[e._v("查询")])],1)],1),e._v(" "),s("el-main",[s("el-table",{attrs:{data:e.projects}},[s("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:"","label-width":".8rem"}},[s("el-form-item",{attrs:{label:"项目编号"}},[s("span",[e._v(e._s(t.row.id))])]),e._v(" "),s("el-form-item",{attrs:{label:"项目名称"}},[s("span",[e._v(e._s(t.row.title))])]),e._v(" "),s("el-form-item",{attrs:{label:"项目描述"}},[t.row.update?s("el-input",{model:{value:t.row.description,callback:function(s){e.$set(t.row,"description",s)},expression:"props.row.description"}}):s("span",[e._v(e._s(t.row.description))])],1),e._v(" "),s("el-form-item",{attrs:{label:"资金"}},[t.row.update?s("el-input",{model:{value:t.row.funding,callback:function(s){e.$set(t.row,"funding",s)},expression:"props.row.funding"}}):s("span",[e._v(e._s((+t.row.funding).toFixed(2)))])],1),e._v(" "),s("el-form-item",{attrs:{label:"实际开支"}},[s("span",[e._v(e._s((+t.row.overhead>0?+t.row.overhead:0).toFixed(2)))])]),e._v(" "),s("el-form-item",{attrs:{label:"预计开支"}},[s("span",{class:e.getClass(t.row)},[e._v(e._s((+t.row.alloverhead>0?+t.row.alloverhead:0).toFixed(2)))])]),e._v(" "),s("el-form-item",{attrs:{label:"超支上限"}},[t.row.update?s("el-input",{model:{value:t.row.overflow,callback:function(s){e.$set(t.row,"overflow",s)},expression:"props.row.overflow"}}):s("span",[e._v(e._s(t.row.overflow))])],1),e._v(" "),s("el-form-item",{attrs:{label:"创建时间"}},[s("span",[e._v(e._s(e.formatDate(t.row.occurTime)))])]),e._v(" "),s("el-form-item",[!t.row.update&&e.hasACC?s("el-button",{attrs:{type:"text"},on:{click:function(s){e.updateProject(t.row,t.$index)}}},[e._v("修改")]):e._e(),e._v(" "),t.row.update?s("el-button",{attrs:{type:"text"},on:{click:function(s){e.updateProject(t.row,t.$index)}}},[e._v("提交")]):e._e(),e._v(" "),t.row.update?s("el-button",{attrs:{type:"text"},on:{click:function(s){e.cancelUpdateProject(t.row,t.$index)}}},[e._v("取消")]):e._e()],1)],1)]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"id",label:"项目编号"}}),e._v(" "),s("el-table-column",{attrs:{prop:"title",label:"项目名称"}}),e._v(" "),s("el-table-column",{attrs:{prop:"funding",label:"资金"}}),e._v(" "),s("el-table-column",{attrs:{label:"实际开支"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s((+t.row.overhead>0?+t.row.overhead:0).toFixed(2)))])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"预计开支"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",{class:e.getClass(t.row)},[e._v(e._s((+t.row.alloverhead>0?+t.row.alloverhead:0).toFixed(2)))])]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"overflow",label:"超支上限"}}),e._v(" "),s("el-table-column",{attrs:{prop:"occurTime",label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(e.formatDate(t.row.occurTime))+"\n                    ")]}}])})],1),e._v(" "),s("el-pagination",{attrs:{layout:"prev, pager, next",total:e.total,"page-size":e.limit.limit},on:{"current-change":e.changePage}})],1)],1)],1)},staticRenderFns:[]};var Ve=s("VU/8")(ze,Ue,!1,function(e){s("VvxL")},null,null).exports,Me={data:function(){return{policies:[],total:0,limit:{limit:20,offset:0}}},mounted:function(){this.getPolicy()},methods:{getPolicy:function(){var e=this,t=this.$store.state.token||localStorage.getItem("token")&&localStorage.getItem("token").slice(0,-5);this.$request.post("/test/getPolicy").set("Authorization","Bearer "+t).send(this.limit).end(function(t,s){t?e.$message({type:"error",message:t.response.text}):(e.policies=s.body.data,e.total=s.body.total)})},goDetail:function(e){this.$router.push("/policy/detail?id="+e)}}},Ne={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"policy"},[s("div",{staticClass:"content"},[s("ul",{staticClass:"wrapper"},[e.policies.length?e._e():s("div",{staticClass:"empty"},[e._v("没有数据哦~")]),e._v(" "),e._l(e.policies,function(t,a){return s("li",{key:t.id,on:{click:function(s){e.goDetail(t.id)}}},[s("span",{staticClass:"index"},[e._v(e._s(a+1)+"、")]),s("span",[e._v(e._s(t.title))])])})],2),e._v(" "),s("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next",total:e.total}})],1)])},staticRenderFns:[]};var Le=s("VU/8")(Me,Ne,!1,function(e){s("QN98")},"data-v-4620c11e",null).exports,He={data:function(){return{policy:{title:"",occurTime:"",data:""},fileList:[]}},created:function(){var e=this,t=p(location.href.split("?")[1]);if(t.id){var s=this.$store.state.token||localStorage.getItem("token")&&localStorage.getItem("token").slice(0,-5);this.$request.post("/test/getPolicyDetail").set("Authorization","Bearer "+s).send({id:t.id}).end(function(t,s){t?e.$message({type:"error",message:t.response.text}):e.policy=s.body}),this.getPolicyFiles(t.id)}},methods:{formatDate:m,handlePreview:function(e){window.open(e.url)},getPolicyFiles:function(e){var t=this,s=this.$store.state.token||localStorage.getItem("token")&&localStorage.getItem("token").slice(0,-5);this.$request.post("/test/getPolicyFiles").set("Authorization","Bearer "+s).send({id:e}).end(function(e,s){e?t.$message({type:"error",message:e.response.text}):s.body.forEach(function(e){t.fileList.push({name:"附件"+(t.fileList.length+1),url:e.url,id:e.id})})})}}},Oe={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"policy-detail"},[s("h2",{staticClass:"title"},[e._v(e._s(e.policy.title))]),e._v(" "),s("p",{staticClass:"time"},[e._v("创建时间："+e._s(e.formatDate(e.policy.occurTime)))]),e._v(" "),s("p",{staticClass:"content",domProps:{innerHTML:e._s(e.policy.data)}}),e._v(" "),s("div",{staticClass:"file-wrapper"},[s("ul",e._l(e.fileList,function(t,a){return s("li",{key:t.id,staticClass:"content",on:{click:function(s){e.handlePreview(t)}}},[e._v("\n                附件"+e._s(a+1)+"\n            ")])}))])])},staticRenderFns:[]};var Qe=s("VU/8")(He,Oe,!1,function(e){s("YBWT")},null,null).exports,We={data:function(){return{questions:[],total:0,limit:{limit:20,offset:0}}},mounted:function(){this.getquestion()},methods:{getQuestion:function(){var e=this,t=this.$store.state.token||localStorage.getItem("token")&&localStorage.getItem("token").slice(0,-5);this.$request.post("/test/getQuestion").set("Authorization","Bearer "+t).send(this.limit).end(function(t,s){t?e.$message({type:"error",message:t.response.text}):(e.questions=s.body.data,e.total=s.body.total)})},goDetail:function(e){this.$router.push("/question/detail?id="+e)}}},Je={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"question"},[s("div",{staticClass:"content"},[s("ul",{staticClass:"wrapper"},[e.questions.length?e._e():s("div",{staticClass:"empty"},[e._v("没有数据哦~")]),e._v(" "),e._l(e.questions,function(t,a){return s("li",{key:t.id,on:{click:function(s){e.goDetail(t.id)}}},[s("span",{staticClass:"index"},[e._v(e._s(a+1)+"、")]),s("span",[e._v(e._s(t.title))])])})],2),e._v(" "),s("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next",total:e.total}})],1)])},staticRenderFns:[]};var Ye=s("VU/8")(We,Je,!1,function(e){s("8W4K")},"data-v-f25bd776",null).exports,Ge={data:function(){return{question:{title:"",occurTime:"",data:""}}},created:function(){var e=this,t=p(location.href.split("?")[1]);if(t.id){var s=this.$store.state.token||localStorage.getItem("token")&&localStorage.getItem("token").slice(0,-5);this.$request.post("/test/getQuestionDetail").set("Authorization","Bearer "+s).send({id:t.id}).end(function(t,s){t?e.$message({type:"error",message:t.response.text}):e.question=s.body})}},methods:{formatDate:m}},Xe={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"question-detail"},[s("h2",{staticClass:"title"},[e._v(e._s(e.question.title))]),e._v(" "),s("p",{staticClass:"time"},[e._v("创建时间："+e._s(e.formatDate(e.question.occurTime)))]),e._v(" "),s("p",{staticClass:"content",domProps:{innerHTML:e._s(e.question.data)}})])},staticRenderFns:[]};var Ke=s("VU/8")(Ge,Xe,!1,function(e){s("kqyH")},null,null).exports,Ze={data:function(){return{announcements:[],total:0,limit:{limit:20,offset:0}}},mounted:function(){this.getAnnouncement()},methods:{formatDate:m,goRouter:function(e){this.$router.push(e)},getAnnouncement:function(){var e=this,t=this.$store.state.token||localStorage.getItem("token")&&localStorage.getItem("token").slice(0,-5);this.$request.post("/test/getAnnouncement").set("Authorization","Bearer "+t).send(this.limit).end(function(t,s){t?e.$message({type:"error",message:t.response.text}):(e.announcements=s.body.data,e.total=s.body.total)})},goDetail:function(e){this.$router.push("/announcement/detail?id="+e)}}},et={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"announcement"},[s("div",{staticClass:"content"},[s("ul",{staticClass:"wrapper"},[e.announcements.length?e._e():s("div",{staticClass:"empty"},[e._v("没有数据哦~")]),e._v(" "),e._l(e.announcements,function(t){return s("li",{key:t.id,staticClass:"entry",on:{click:function(s){e.goRouter(t.url)}}},[s("span",{staticClass:"title"},[e._v(e._s(t.title))]),e._v(" "),s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"bottom"}},[s("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(t.data)},slot:"content"}),e._v(" "),s("span",{staticClass:"cont",domProps:{innerHTML:e._s(t.data)}})]),e._v(" "),s("span",{staticClass:"time"},[e._v(e._s(e.formatDate(t.occurTime)))])],1)})],2),e._v(" "),s("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next",total:e.total}})],1)])},staticRenderFns:[]};var tt=s("VU/8")(Ze,et,!1,function(e){s("xIAn")},"data-v-a8ad9512",null).exports;a.default.use(w.a);var st=new w.a({routes:[{path:"/index",name:"index",component:C},{path:"/login",name:"login",component:Pe},{path:"/userInfor",name:"userInfor",component:Ee},{path:"/project",name:"project",component:Ve},{path:"/reimbursement/:id",component:I,children:[{path:"createreq",component:N},{path:"createreim",component:J},{path:"requndone",component:X},{path:"requnremark",component:ee},{path:"reimundone",component:ce},{path:"reimunremark",component:me},{path:"find",component:ae},{path:"reqdetail",component:ne},{path:"reimdetail",component:fe},{path:"detail",component:_e}]},{path:"/statistics",component:Se},{path:"/policy",component:Le},{path:"/policy/detail",component:Qe},{path:"/question",component:Ye},{path:"/question/detail",component:Ke},{path:"/announcement",component:tt}]}),at=s("XLwt");a.default.use(r.a),a.default.use(n.a),a.default.prototype.$request=y.a,a.default.prototype.$chart=at,a.default.config.productionTip=!1;var rt=new r.a.Store({state:{user:{}},mutations:{setUser:function(e,t){e.user=t},setToken:function(e,t){e.token=t},setAvatar:function(e,t){e.user.avatar=t},setSocket:function(e,t){e.socket=t},logout:function(e){delete e.token,delete e.user,delete e.socket}}});new a.default({el:"#app",router:st,store:rt,components:{App:b},template:"<App/>"})},"P+gK":function(e,t){},POQ2:function(e,t){},QN98:function(e,t){},RD26:function(e,t){},S3L7:function(e,t){},UmmX:function(e,t){},VvxL:function(e,t){},YBWT:function(e,t){},cpeJ:function(e,t){},d7VV:function(e,t){},diG0:function(e,t){},"ef+N":function(e,t){},kiXi:function(e,t){},kqyH:function(e,t){},n4s9:function(e,t){},qDz2:function(e,t){},tvR6:function(e,t){},wFCr:function(e,t){},xIAn:function(e,t){},xexC:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.360cf2b6912a2372ed72.js.map